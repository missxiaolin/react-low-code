import{j as d,m as K,u as he}from"./index-BGwl3vz8.js";var fe="function",ve="object",de="string",pe="undefined",ge=typeof document!==pe&&document,me=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Q={cm:function(a){return a*96/2.54},mm:function(a){return a*96/254},in:function(a){return a*96},pt:function(a){return a*96/72},pc:function(a){return a*96/6},"%":function(a,r){return a*r/100},vw:function(a,r){return r===void 0&&(r=window.innerWidth),a/100*r},vh:function(a,r){return r===void 0&&(r=window.innerHeight),a/100*r},vmax:function(a,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),a/100*r},vmin:function(a,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),a/100*r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _e(){for(var a=0,r=0,i=arguments.length;r<i;r++)a+=arguments[r].length;for(var e=Array(a),t=0,r=0;r<i;r++)for(var o=arguments[r],n=0,s=o.length;n<s;n++,t++)e[t]=o[n];return e}function Z(a){return a&&typeof a===ve}function $(a){return Array.isArray(a)}function Ht(a){return typeof a===de}function we(a){return typeof a===fe}function Se(a,r){var i=a===""||a==" ",e=r===""||r==" ";return e&&i||a===r}function Vt(a,r,i,e,t){var o=_t(a,r,i);return o?i:Ee(a,r,i+1,e,t)}function _t(a,r,i){if(!a.ignore)return null;var e=r.slice(Math.max(i-3,0),i+3).join("");return new RegExp(a.ignore).exec(e)}function Ee(a,r,i,e,t){for(var o=function(c){var u=r[c].trim();if(u===a.close&&!_t(a,r,c))return{value:c};var f=c,l=ht(t,function(p){var g=p.open;return g===u});if(l&&(f=Vt(l,r,c,e,t)),f===-1)return n=c,"break";c=f,n=c},n,s=i;s<e;++s){var h=o(s);if(s=n,typeof h=="object")return h.value;if(h==="break")break}return-1}function Zt(a,r){var i=Ht(r)?{separator:r}:r,e=i.separator,t=e===void 0?",":e,o=i.isSeparateFirst,n=i.isSeparateOnlyOpenClose,s=i.isSeparateOpenClose,h=s===void 0?n:s,c=i.openCloseCharacters,u=c===void 0?me:c,f=u.map(function(b){var z=b.open,x=b.close;return z===x?z:z+"|"+x}).join("|"),l="(\\s*"+t+"\\s*|"+f+"|\\s+)",p=new RegExp(l,"g"),g=a.split(p).filter(function(b){return b&&b!=="undefined"}),_=g.length,m=[],E=[];function v(){return E.length?(m.push(E.join("")),E=[],!0):!1}for(var w=function(b){var z=g[b].trim(),x=b,A=ht(u,function(X){var j=X.open;return j===z}),M=ht(u,function(X){var j=X.close;return j===z});if(A){if(x=Vt(A,g,b,_,u),x!==-1&&h)return v()&&o||(m.push(g.slice(b,x+1).join("")),b=x,o)?(S=b,"break"):(S=b,"continue")}else if(M&&!_t(M,g,b)){var R=_e(u);return R.splice(u.indexOf(M),1),{value:Zt(a,{separator:t,isSeparateFirst:o,isSeparateOnlyOpenClose:n,isSeparateOpenClose:h,openCloseCharacters:R})}}else if(Se(z,t)&&!n)return v(),o?(S=b,"break"):(S=b,"continue");x===-1&&(x=_-1),E.push(g.slice(b,x+1).join("")),b=x,S=b},S,y=0;y<_;++y){var C=w(y);if(y=S,typeof C=="object")return C.value;if(C==="break")break}return E.length&&m.push(E.join("")),m}function ye(a){return Zt(a,",")}function ze(a){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(a);if(!r)return{prefix:"",unit:"",value:NaN};var i=r[1],e=r[2],t=r[3];return{prefix:i,unit:t,value:parseFloat(e)}}function $t(a){return a.replace(/[\s-_]+([^\s-_])/g,function(r,i){return i.toUpperCase()})}function xt(){return Date.now?Date.now():new Date().getTime()}function qt(a,r,i){i===void 0&&(i=-1);for(var e=a.length,t=0;t<e;++t)if(r(a[t],t,a))return t;return i}function ht(a,r,i){var e=qt(a,r);return e>-1?a[e]:i}function L(a,r){var i=ze(a),e=i.value,t=i.unit;if(Z(r)){var o=r[t];if(o){if(we(o))return o(e);if(Q[t])return Q[t](e,o)}}else if(t==="%")return e*r/100;return Q[t]?Q[t](e):e}function W(a,r,i){return Math.max(r,Math.min(a,i))}function be(a,r){var i=1/r;return Math.round(a/r)/i}function H(a,r){a.classList?a.classList.add(r):a.className+=" "+r}function T(a,r,i,e){a.addEventListener(r,i,e)}function D(a,r,i,e){a.removeEventListener(r,i,e)}function wt(a){return(a==null?void 0:a.ownerDocument)||ge}function V(a){var r;return((r=a==null?void 0:a.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function Ce(a){return a&&"postMessage"in a&&"blur"in a&&"self"in a}function Dt(a){return Z(a)&&a.nodeName&&a.nodeType&&"ownerDocument"in a}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ft=function(){return ft=Object.assign||function(r){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},ft.apply(this,arguments)};function xe(){for(var a=0,r=0,i=arguments.length;r<i;r++)a+=arguments[r].length;for(var e=Array(a),t=0,r=0;r<i;r++)for(var o=arguments[r],n=0,s=o.length;n<s;n++,t++)e[t]=o[n];return e}var St=function(){function a(){this._events={}}var r=a.prototype;return r.on=function(i,e){if(Z(i))for(var t in i)this.on(t,i[t]);else this._addEvent(i,e,{});return this},r.off=function(i,e){if(!i)this._events={};else if(Z(i))for(var t in i)this.off(t);else if(!e)this._events[i]=[];else{var o=this._events[i];if(o){var n=qt(o,function(s){return s.listener===e});n>-1&&o.splice(n,1)}}return this},r.once=function(i,e){var t=this;return e&&this._addEvent(i,e,{once:!0}),new Promise(function(o){t._addEvent(i,o,{once:!0})})},r.emit=function(i,e){var t=this;e===void 0&&(e={});var o=this._events[i];if(!i||!o)return!0;var n=!1;return e.eventType=i,e.stop=function(){n=!0},e.currentTarget=this,xe(o).forEach(function(s){s.listener(e),s.once&&t.off(i,s.listener)}),!n},r.trigger=function(i,e){return e===void 0&&(e={}),this.emit(i,e)},r._addEvent=function(i,e,t){var o=this._events;o[i]=o[i]||[];var n=o[i];n.push(ft({listener:e},t))},a}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vt=function(a,r){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},vt(a,r)};function De(a,r){vt(a,r);function i(){this.constructor=a}a.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var Y=function(){return Y=Object.assign||function(r){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},Y.apply(this,arguments)};function Te(a,r){var i=r[0]-a[0],e=r[1]-a[1],t=Math.atan2(e,i);return t>=0?t:t+Math.PI*2}function at(a){return Te([a[0].clientX,a[0].clientY],[a[1].clientX,a[1].clientY])/Math.PI*180}function Ye(a){return a.touches&&a.touches.length>=2}function tt(a){return a?a.touches?Re(a.touches):[Ut(a)]:[]}function Xe(a){return a&&(a.type.indexOf("mouse")>-1||"button"in a)}function Tt(a,r,i){var e=i.length,t=G(a,e),o=t.clientX,n=t.clientY,s=t.originalClientX,h=t.originalClientY,c=G(r,e),u=c.clientX,f=c.clientY,l=G(i,e),p=l.clientX,g=l.clientY,_=o-u,m=n-f,E=o-p,v=n-g;return{clientX:s,clientY:h,deltaX:_,deltaY:m,distX:E,distY:v}}function st(a){return Math.sqrt(Math.pow(a[0].clientX-a[1].clientX,2)+Math.pow(a[0].clientY-a[1].clientY,2))}function Re(a){for(var r=Math.min(a.length,2),i=[],e=0;e<r;++e)i.push(Ut(a[e]));return i}function Ut(a){return{clientX:a.clientX,clientY:a.clientY}}function G(a,r){r===void 0&&(r=a.length);for(var i={clientX:0,clientY:0,originalClientX:0,originalClientY:0},e=Math.min(a.length,r),t=0;t<e;++t){var o=a[t];i.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,i.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,i.clientX+=o.clientX,i.clientY+=o.clientY}return r?{clientX:i.clientX/r,clientY:i.clientY/r,originalClientX:i.originalClientX/r,originalClientY:i.originalClientY/r}:i}var lt=function(){function a(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return a.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),at(r)},a.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),at(r)-at(this.startClients)},a.prototype.getPosition=function(r,i){r===void 0&&(r=this.prevClients);var e=Tt(r||this.prevClients,this.prevClients,this.startClients),t=e.deltaX,o=e.deltaY;return this.movement+=Math.sqrt(t*t+o*o),this.prevClients=r,e},a.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);for(var i=this.prevClients,e=this.startClients,t=Math.min(this.length,i.length),o=[],n=0;n<t;++n)o[n]=Tt([r[n]],[i[n]],[e[n]]);return o},a.prototype.getMovement=function(r){var i=this.movement;if(!r)return i;var e=G(r,this.length),t=G(this.prevClients,this.length),o=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(o*o+n*n)+i},a.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),st(r)},a.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),st(r)/st(this.startClients)},a.prototype.move=function(r,i){this.startClients.forEach(function(e){e.clientX-=r,e.clientY-=i}),this.prevClients.forEach(function(e){e.clientX-=r,e.clientY-=i})},a}(),Yt=["textarea","input"],Gt=function(a){De(r,a);function r(i,e){e===void 0&&(e={});var t=a.call(this)||this;t.options={},t.flag=!1,t.pinchFlag=!1,t.data={},t.isDrag=!1,t.isPinch=!1,t.clientStores=[],t.targets=[],t.prevTime=0,t.doubleFlag=!1,t._useMouse=!1,t._useTouch=!1,t._useDrag=!1,t._dragFlag=!1,t._isTrusted=!1,t._isMouseEvent=!1,t._isSecondaryButton=!1,t._preventMouseEvent=!1,t._prevInputEvent=null,t._isDragAPI=!1,t._isIdle=!0,t._preventMouseEventId=0,t._window=window,t.onDragStart=function(l,p){if(p===void 0&&(p=!0),!(!t.flag&&l.cancelable===!1)){var g=l.type.indexOf("drag")>=-1;if(!(t.flag&&g)){t._isDragAPI=!0;var _=t.options,m=_.container,E=_.pinchOutside,v=_.preventWheelClick,w=_.preventRightClick,S=_.preventDefault,y=_.checkInput,C=_.dragFocusedInput,b=_.preventClickEventOnDragStart,z=_.preventClickEventOnDrag,x=_.preventClickEventByCondition,A=t._useTouch,M=!t.flag;if(t._isSecondaryButton=l.which===3||l.button===2,v&&(l.which===2||l.button===1)||w&&(l.which===3||l.button===2))return t.stop(),!1;if(M){var R=t._window.document.activeElement,X=l.target;if(X){var j=X.tagName.toLowerCase(),rt=Yt.indexOf(j)>-1,J=X.isContentEditable;if(rt||J){if(y||!C&&R===X)return!1;if(R&&(R===X||J&&R.isContentEditable&&R.contains(X)))if(C)X.blur();else return!1}else if((S||l.type==="touchstart")&&R){var it=R.tagName.toLowerCase();(R.isContentEditable||Yt.indexOf(it)>-1)&&R.blur()}(b||z||x)&&T(t._window,"click",t._onClick,!0)}t.clientStores=[new lt(tt(l))],t._isIdle=!1,t.flag=!0,t.isDrag=!1,t._isTrusted=p,t._dragFlag=!0,t._prevInputEvent=l,t.data={},t.doubleFlag=xt()-t.prevTime<200,t._isMouseEvent=Xe(l),!t._isMouseEvent&&t._preventMouseEvent&&t._allowMouseEvent();var ot=t._preventMouseEvent||t.emit("dragStart",Y(Y({data:t.data,datas:t.data,inputEvent:l,isMouseEvent:t._isMouseEvent,isSecondaryButton:t._isSecondaryButton,isTrusted:p,isDouble:t.doubleFlag},t.getCurrentStore().getPosition()),{preventDefault:function(){l.preventDefault()},preventDrag:function(){t._dragFlag=!1}}));ot===!1&&t.stop(),t._isMouseEvent&&t.flag&&S&&l.preventDefault()}if(!t.flag)return!1;var Ct=0;if(M?(t._attchDragEvent(),A&&E&&(Ct=setTimeout(function(){T(m,"touchstart",t.onDragStart,{passive:!1})}))):A&&E&&D(m,"touchstart",t.onDragStart),t.flag&&Ye(l)){if(clearTimeout(Ct),M&&l.touches.length!==l.changedTouches.length)return;t.pinchFlag||t.onPinchStart(l)}}}},t.onDrag=function(l,p){if(t.flag){var g=t.options.preventDefault;!t._isMouseEvent&&g&&l.preventDefault(),t._prevInputEvent=l;var _=tt(l),m=t.moveClients(_,l,!1);if(t._dragFlag){if(t.pinchFlag||m.deltaX||m.deltaY){var E=t._preventMouseEvent||t.emit("drag",Y(Y({},m),{isScroll:!!p,inputEvent:l}));if(E===!1){t.stop();return}}t.pinchFlag&&t.onPinch(l,_)}t.getCurrentStore().getPosition(_,!0)}},t.onDragEnd=function(l){if(t.flag){var p=t.options,g=p.pinchOutside,_=p.container,m=p.preventClickEventOnDrag,E=p.preventClickEventOnDragStart,v=p.preventClickEventByCondition,w=t.isDrag;(m||E||v)&&requestAnimationFrame(function(){t._allowClickEvent()}),!v&&!E&&m&&!w&&t._allowClickEvent(),t._useTouch&&g&&D(_,"touchstart",t.onDragStart),t.pinchFlag&&t.onPinchEnd(l);var S=l!=null&&l.touches?tt(l):[],y=S.length;y===0||!t.options.keepDragging?t.flag=!1:t._addStore(new lt(S));var C=t._getPosition(),b=xt(),z=!w&&t.doubleFlag;t._prevInputEvent=null,t.prevTime=w||z?0:b,t.flag||(t._dettachDragEvent(),t._preventMouseEvent||t.emit("dragEnd",Y({data:t.data,datas:t.data,isDouble:z,isDrag:w,isClick:!w,isMouseEvent:t._isMouseEvent,isSecondaryButton:t._isSecondaryButton,inputEvent:l,isTrusted:t._isTrusted},C)),t.clientStores=[],t._isMouseEvent||(t._preventMouseEvent=!0,clearTimeout(t._preventMouseEventId),t._preventMouseEventId=setTimeout(function(){t._preventMouseEvent=!1},200)),t._isIdle=!0)}},t.onBlur=function(){t.onDragEnd()},t._allowClickEvent=function(){D(t._window,"click",t._onClick,!0)},t._onClick=function(l){t._allowClickEvent(),t._allowMouseEvent();var p=t.options.preventClickEventByCondition;p!=null&&p(l)||(l.stopPropagation(),l.preventDefault())},t._onContextMenu=function(l){var p=t.options;p.preventRightClick?t.onDragEnd(l):l.preventDefault()},t._passCallback=function(){};var o=[].concat(i),n=o[0];t._window=Ce(n)?n:V(n),t.options=Y({checkInput:!1,container:n&&!("document"in n)?V(n):n,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},e);var s=t.options,h=s.container,c=s.events,u=s.checkWindowBlur;if(t._useDrag=c.indexOf("drag")>-1,t._useTouch=c.indexOf("touch")>-1,t._useMouse=c.indexOf("mouse")>-1,t.targets=o,t._useDrag&&o.forEach(function(l){T(l,"dragstart",t.onDragStart)}),t._useMouse&&(o.forEach(function(l){T(l,"mousedown",t.onDragStart),T(l,"mousemove",t._passCallback)}),T(h,"contextmenu",t._onContextMenu)),u&&T(V(),"blur",t.onBlur),t._useTouch){var f={passive:!1};o.forEach(function(l){T(l,"touchstart",t.onDragStart,f),T(l,"touchmove",t._passCallback,f)})}return t}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(i){return this.getCurrentStore().getMovement(i)+this.clientStores.slice(1).reduce(function(e,t){return e+t.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(i,e,t,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(i,e),o&&this.onDrag(t,!0))},r.prototype.move=function(i,e){var t=i[0],o=i[1],n=this.getCurrentStore(),s=n.prevClients;return this.moveClients(s.map(function(h){var c=h.clientX,u=h.clientY;return{clientX:c+t,clientY:u+o,originalClientX:c,originalClientY:u}}),e,!0)},r.prototype.triggerDragStart=function(i){this.onDragStart(i,!1)},r.prototype.setEventData=function(i){var e=this.data;for(var t in i)e[t]=i[t];return this},r.prototype.setEventDatas=function(i){return this.setEventData(i)},r.prototype.getCurrentEvent=function(i){return i===void 0&&(i=this._prevInputEvent),Y(Y({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:i})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var i=this,e=this.targets,t=this.options.container;this.off(),D(this._window,"blur",this.onBlur),this._useDrag&&e.forEach(function(o){D(o,"dragstart",i.onDragStart)}),this._useMouse&&(e.forEach(function(o){D(o,"mousedown",i.onDragStart)}),D(t,"contextmenu",this._onContextMenu)),this._useTouch&&(e.forEach(function(o){D(o,"touchstart",i.onDragStart)}),D(t,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(i){var e=this,t=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>t)){var o=new lt(tt(i));this.pinchFlag=!0,this._addStore(o);var n=this.emit("pinchStart",Y(Y({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:i,isTrusted:this._isTrusted,preventDefault:function(){i.preventDefault()},preventDrag:function(){e._dragFlag=!1}}));n===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(i,e){if(!(!this.flag||!this.pinchFlag||e.length<2)){var t=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Y(Y({data:this.data,datas:this.data,movement:this.getMovement(e),angle:t.getAngle(e),rotation:t.getRotation(e),touches:t.getPositions(e),scale:t.getScale(e),distance:t.getDistance(e)},t.getPosition(e)),{inputEvent:i,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(i){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var t=this.getCurrentStore();this.emit("pinchEnd",Y(Y({data:this.data,datas:this.data,isPinch:e,touches:t.getPositions()},t.getPosition()),{inputEvent:i}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(i,e,t){var o=this._getPosition(i,t),n=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var s=!1;return!n&&this.isDrag&&(s=!0),Y(Y({data:this.data,datas:this.data},o),{movement:this.getMovement(i),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:s})},r.prototype._addStore=function(i){this.clientStores.splice(0,0,i)},r.prototype._getPosition=function(i,e){var t=this.getCurrentStore(),o=t.getPosition(i,e),n=this.clientStores.slice(1).reduce(function(c,u){var f=u.getPosition();return c.distX+=f.distX,c.distY+=f.distY,c},o),s=n.distX,h=n.distY;return Y(Y({},o),{distX:s,distY:h})},r.prototype._attchDragEvent=function(){var i=this._window,e=this.options.container,t={passive:!1};this._isDragAPI&&(T(e,"dragover",this.onDrag,t),T(i,"dragend",this.onDragEnd)),this._useMouse&&(T(e,"mousemove",this.onDrag),T(i,"mouseup",this.onDragEnd)),this._useTouch&&(T(e,"touchmove",this.onDrag,t),T(i,"touchend",this.onDragEnd,t),T(i,"touchcancel",this.onDragEnd,t))},r.prototype._dettachDragEvent=function(){var i=this._window,e=this.options.container;this._isDragAPI&&(D(e,"dragover",this.onDrag),D(i,"dragend",this.onDragEnd)),this._useMouse&&(D(e,"mousemove",this.onDrag),D(i,"mouseup",this.onDragEnd)),this._useTouch&&(D(e,"touchstart",this.onDragStart),D(e,"touchmove",this.onDrag),D(i,"touchend",this.onDragEnd),D(i,"touchcancel",this.onDragEnd))},r.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},r}(St);function Oe(a,r){return r.replace(/([^}{]*){/gm,function(i,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+a+"$1")+"{"})}function q(a,r){return function(i){i&&(a[r]=i)}}function Ae(a,r){return function(i){var e=i.prototype;a.forEach(function(t){r(e,t)})}}function Me(a,r){return r===void 0&&(r={}),function(i,e){a.forEach(function(t){var o=r[t]||t;o in i||(i[o]=function(){for(var n,s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];var c=(n=this[e])[t].apply(n,s);return c===this[e]?this:c})})}}function Pe(a){for(var r=5381,i=a.length;i;)r=r*33^a.charCodeAt(--i);return r>>>0}var je=Pe;function Ne(a){return je(a).toString(36)}function Le(a){if(a&&a.getRootNode){var r=a.getRootNode();if(r.nodeType===11)return r}}function We(a,r,i){return i.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(e,t){var o=t.trim();return(o?ye(o):[""]).map(function(n){var s=n.trim();return s.indexOf("@")===0?s:s.indexOf(":global")>-1?s.replace(/\:global/g,""):s.indexOf(":host")>-1?"".concat(s.replace(/\:host/g,".".concat(a))):s?".".concat(a," ").concat(s):".".concat(a)}).join(", ")+" {"})}function Fe(a,r,i,e,t){var o=wt(e),n=o.createElement("style");return n.setAttribute("type","text/css"),n.setAttribute("data-styled-id",a),n.setAttribute("data-styled-count","1"),i.nonce&&n.setAttribute("nonce",i.nonce),n.innerHTML=We(a,r,i),(t||o.head||o.body).appendChild(n),n}function ke(a){var r="rCS"+Ne(a);return{className:r,inject:function(i,e){e===void 0&&(e={});var t=Le(i),o=(t||i.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!o)o=Fe(r,a,e,i,t);else{var n=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(n+1))}return{destroy:function(){var s,h=parseFloat(o.getAttribute("data-styled-count"))||0;h<=1?(o.remove?o.remove():(s=o.parentNode)===null||s===void 0||s.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(h-1))}}}}}function Et(a,r){for(var i=a.length,e=0;e<i;++e)if(r(a[e],e))return!0;return!1}function Jt(a,r){for(var i=a.length,e=0;e<i;++e)if(r(a[e],e))return a[e];return null}function Kt(a){var r=a;if(typeof r>"u"){if(typeof navigator>"u"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function yt(a,r){try{return new RegExp(a,"g").exec(r)}catch{return null}}function Ie(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var a=navigator.userAgentData,r=a.brands||a.uaList;return!!(r&&r.length)}function Be(a,r){var i=yt("("+a+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return i?i[3]:""}function dt(a){return a.replace(/_/g,".")}function U(a,r){var i=null,e="-1";return Et(a,function(t){var o=yt("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!o||t.brand?!1:(i=t,e=o[3]||"-1",t.versionAlias?e=t.versionAlias:t.versionTest&&(e=Be(t.versionTest.toLowerCase(),r)||e),e=dt(e),!0)}),{preset:i,version:e}}function et(a,r){var i={brand:"",version:"-1"};return Et(a,function(e){var t=Qt(r,e);return t?(i.brand=e.id,i.version=e.versionAlias||t.version,i.version!=="-1"):!1}),i}function Qt(a,r){return Jt(a,function(i){var e=i.brand;return yt(""+r.test,e.toLowerCase())})}var te=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ee=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],pt=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],ne=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],re=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function ie(a){return!!U(ne,a).preset}function He(a){var r=Kt(a),i=!!/mobi/g.exec(r),e={name:"unknown",version:"-1",majorVersion:-1,webview:ie(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},t={name:"unknown",version:"-1",majorVersion:-1},o=U(te,r),n=o.preset,s=o.version,h=U(re,r),c=h.preset,u=h.version,f=U(ee,r);if(e.chromium=!!f.preset,e.chromiumVersion=f.version,!e.chromium){var l=U(pt,r);e.webkit=!!l.preset,e.webkitVersion=l.version}return c&&(t.name=c.id,t.version=u,t.majorVersion=parseInt(u,10)),n&&(e.name=n.id,e.version=s,e.webview&&t.name==="ios"&&e.name!=="safari"&&(e.webview=!1)),e.majorVersion=parseInt(e.version,10),{browser:e,os:t,isMobile:i,isHints:!1}}function Ve(a){var r=navigator.userAgentData,i=(r.uaList||r.brands).slice(),e=r.mobile||!1,t=i[0],o=(r.platform||navigator.platform).toLowerCase(),n={name:t.brand,version:t.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!et(ne,i).brand||ie(Kt())},s={name:"unknown",version:"-1",majorVersion:-1};n.webkit=!n.chromium&&Et(pt,function(l){return Qt(i,l)});var h=et(ee,i);if(n.chromium=!!h.brand,n.chromiumVersion=h.version||"-1",!n.chromium){var c=et(pt,i);n.webkit=!!c.brand,n.webkitVersion=c.version||"-1"}var u=Jt(re,function(l){return new RegExp(""+l.test,"g").exec(o)});s.name=u?u.id:"";{var f=et(te,i);n.name=f.brand||n.name,n.version=f.brand&&a?a.uaFullVersion:f.version}return n.webkit&&(s.name=e?"ios":"mac"),s.name==="ios"&&n.webview&&(n.version="-1"),s.version=dt(s.version),n.version=dt(n.version),s.majorVersion=parseInt(s.version,10),n.majorVersion=parseInt(n.version,10),{browser:n,os:s,isMobile:e,isHints:!0}}function Ze(a){return Ie()?Ve():He(a)}var gt=function(a,r){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])},gt(a,r)};function zt(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");gt(a,r);function i(){this.constructor=a}a.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var P=function(){return P=Object.assign||function(r){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},P.apply(this,arguments)};function $e(a,r,i,e){var t=arguments.length,o=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,i):e,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(a,r,i,e);else for(var s=a.length-1;s>=0;s--)(n=a[s])&&(o=(t<3?n(o):t>3?n(r,i,o):n(r,i))||o);return t>3&&o&&Object.defineProperty(r,i,o),o}function Xt(a,r,i){if(i||arguments.length===2)for(var e=0,t=r.length,o;e<t;e++)(o||!(e in r))&&(o||(o=Array.prototype.slice.call(r,0,e)),o[e]=r[e]);return a.concat(o||Array.prototype.slice.call(r))}var qe=Ze(),Ue=qe.browser.name==="safari",k="infinite-viewer-",Rt="".concat(k,"wrapper"),Ot="".concat(k,"scroll-area"),Ge="".concat(k,"scroll-bar"),oe="".concat(k,"horizontal-scroll-bar"),ae="".concat(k,"vertical-scroll-bar"),At="".concat(k,"scroll-thumb"),se=ke(Oe(k,`
{
    position: relative;
    overscroll-behavior: none;
}
.wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: auto;
    scrollbar-width: none;
    top: 0;
    left: 0;
    will-change: scroll-position;
}
.restrict-wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
}
.wrapper::-webkit-scrollbar {
    display: none;
}
.scroll-area {
    position:absolute;
    top:0;
    left:0;
    transform-origin: 0 0;
}
.scroll-bar {
    position:absolute;
    width: 10px;
    height: 10px;
    box-sizing: border-box;
    right: 0;
    bottom: 0;
    overflow: hidden;
}
.horizontal-scroll-bar {
    width: calc(100% - 20px);
    right: 10px;
    height: 14px;
}
.vertical-scroll-bar {
    height: calc(100% - 20px);
    bottom: 10px;
    width: 14px;
}
.scroll-thumb {
    position:relative;
    opacity: 0.7;
    background: #333;
    border-radius: 3px;
    left: 0px;
    top: 0px;
    z-index: 10;
    width: 6px;
    height: 6px;
    transition: all ease 0.2s;
    opacity: 0;
}
.scroll-bar:hover .scroll-thumb {
    border-radius: 5px;
    opacity: 1;
}
.horizontal-scroll-bar .scroll-thumb {
    margin: 4px 0px;
    transition-property: opacity, margin, height, border-radius;
}
.vertical-scroll-bar .scroll-thumb {
    margin: 0px 4px;
    transition-property: opacity, margin, width, border-radius;
}
.horizontal-scroll-bar:hover .scroll-thumb {
    height: 10px;
    margin: 2px 0px;
}
.vertical-scroll-bar:hover .scroll-thumb {
    width: 10px;
    margin: 0px 2px;
}
`)),O={margin:500,threshold:100,zoom:1,zoomX:1,zoomY:1,rangeX:[-1/0,1/0],rangeY:[-1/0,1/0],rangeOffsetX:[0,0],rangeOffsetY:[0,0],wrapperElement:null,scrollAreaElement:null,horizontalScrollElement:null,verticalScrollElement:null,usePinch:!1,useAutoZoom:!1,useMouseDrag:!1,pinchThreshold:30,cspNonce:"",maxPinchWheel:1/0,wheelScale:.01,displayHorizontalScroll:!0,displayVerticalScroll:!0,useTransform:!0,useWheelPinch:!0,zoomRange:[.001,1/0],wheelPinchKey:"ctrl",useWheelScroll:Ue,zoomOffsetX:"50%",zoomOffsetY:"50%",translateZ:0,useGesture:!0,useResizeObserver:!1,pinchDirection:"all",preventWheelClick:!0,useBounceScrollBar:!1,useOverflowScroll:!1},Mt=function(a){return 1-Math.pow(1-a,3)},Pt={horizontal:{pos:"Left",coord:"X",size:"Width"},vertical:{pos:"Top",coord:"Y",size:"Height"}},le=se.className,bt=["margin","threshold","zoomOffsetX","zoomOffsetY","zoom","zoomX","zoomY","rangeX","rangeY","rangeOffsetX","rangeOffsetY","usePinch","useMouseDrag","pinchThreshold","maxPinchWheel","wheelScale","displayVerticalScroll","displayHorizontalScroll","translateZ","useAutoZoom","wheelPinchKey","zoomRange","zoomRangeX","zoomRangeY","pinchDirection","useOverflowScroll"],Je=Xt(Xt([],bt,!0),["preventWheelClick","useWheelPinch","useWheelScroll","useGesture","cspNonce","wrapperElement","scrollAreaElement","verticalScrollElement","horizontalScrollElement","useResizeObserver","wheelContainer","useBounceScrollBar"],!1),ce=["scroll","abortPinch","dragStart","dragEnd","pinchStart","pinch"],Ke=["getScrollLeft","getScrollTop","getScrollWidth","getScrollHeight","getContainerWidth","getContainerHeight","getViewportWidth","getViewportHeight","getViewportScrollWidth","getViewportScrollHeight","scrollTo","scrollBy","zoomBy","scrollCenter","getContainer","getViewport","getWrapper","setZoom","getRangeX","getRangeY","resize","getZoom","getZoomX","getZoomY","getWheelContainer","setTo","setBy"],Qe=1e-6;function tn(a){var r=a.deltaX,i=a.deltaY,e=a.datas,t=Date.now(),o=e.speed;if(!o){e.speed=[0,0],e.time=t;return}var n=t-e.time;e.speed=[o[0]/2+r/n,o[1]/2+i/n]}function ue(a,r){var i=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return Math.abs(i/r)}function en(a,r){var i=ue(a,r);return[-a[0]/2*i,-a[1]/2*i]}function N(a){return Math.abs(a)}function nn(a,r,i,e,t){var o=t||isFinite(i[0])?i[0]:Math.min(-1,Math.floor(a/r))*r-e,n=t||isFinite(i[1])?i[1]:Math.max(1,Math.ceil(a/r))*r+e;return[o,n]}function jt(a,r){return a??r}function Nt(a,r,i){var e=i.duration,t=i.easing||function(h){return 1-Math.pow(1-h,3)},o=Date.now(),n=o,s=function(){var h=Date.now(),c=h-o;e<c&&(c=e);var u=t(c/e),f=t((n-o)/e);n=h,a(u-f),!(c>=e)&&r(s)};r(s)}var Lt=function(a){zt(r,a);function r(e,t,o){var n=a.call(this)||this;n.type=t,n.isAppend=!1,n.size=0,n.scrollSize=0,n.isHorizontal=!1,n._onDragStart=function(f){var l=n.isHorizontal,p=f.inputEvent.target,g=f.datas,_=n.thumbElement===p;_||setTimeout(function(){requestAnimationFrame(function(){var m=n.thumbElement.getBoundingClientRect(),E=m[l?"left":"top"],v=m[l?"width":"height"],w=E+v,S=f[l?"clientX":"clientY"];if(!(E<=S&&S<=w)){var y=n.size,C=y*y/n.scrollSize;n.scrollBy(E<S?C:-C)}})},100),g.isThumb=_,f.inputEvent.stopPropagation(),f.inputEvent.preventDefault()},n._onDrag=function(f){f.datas.isThumb&&n.scrollBy(n.isHorizontal?f.deltaX:f.deltaY)},n._onWheel=function(f){var l=n.isHorizontal?f.deltaX:f.deltaY;l&&f.preventDefault(),n.trigger("scroll",{delta:l})};var s=t==="horizontal",h=wt(e),c,u=o;return o?c=o.querySelector(".".concat(At)):(u=h.createElement("div"),c=h.createElement("div"),u.insertBefore(c,null),n.isAppend=!0),H(u,s?oe:ae),H(u,Ge),H(c,At),n.thumbElement=c,n.barElement=u,n.isHorizontal=s,n.gesto=new Gt(u,{container:V(h)}).on("dragStart",function(f){return n._onDragStart(f)}).on("drag",function(f){return n._onDrag(f)}),T(n.barElement,"wheel",n._onWheel,{passive:!1}),n}var i=r.prototype;return i.scrollBy=function(e,t){var o=e/this.size;this.trigger("scroll",{delta:t?e:this.scrollSize*o})},i.render=function(e,t,o,n){this.size=o,this.scrollSize=n;var s=e&&be(n-o,.001)>0?1:0,h=this.isHorizontal?["X","width"]:["Y","height"],c=h[0],u=h[1],f=o/n*100,l=Math.max(0,t)/n*100;this.thumbElement.style.cssText+="".concat(u,": ").concat(f,"%;opacity: ").concat(s,";")+"transform: translate".concat(c,"(").concat(100/f*l,"%)")},i.destroy=function(){D(this.barElement,"wheel",this._onWheel),this.gesto.off(),this.off()},r}(St),rn=function(a){zt(r,a);function r(e,t,o){t===void 0&&(t={}),o===void 0&&(o={});var n=a.call(this)||this;return n._containerElement=e,n.offsetX=0,n.offsetY=0,n.containerWidth=0,n.containerHeight=0,n.viewportWidth=0,n.viewportHeight=0,n.viewportScrollWidth=0,n.viewportScrollHeight=0,n.scrollLeft=0,n.scrollTop=0,n._scrollTimer=0,n._zoomTimer=0,n._viewportElement=null,n._wheelContainerElement=null,n.dragFlag=!1,n.isLoop=!1,n._tempScale=[1,1],n._tempRect=null,n._tempRectTimer=null,n._onDestroys=[],n._asLeft=0,n._asTop=0,n.resize=function(){var s=n._containerElement,h=s.offsetWidth,c=s.offsetHeight,u=n._viewportElement,f=u.offsetWidth,l=u.offsetHeight,p=u.scrollWidth,g=u.scrollHeight;n.containerWidth=h,n.containerHeight=c,n.viewportWidth=f,n.viewportHeight=l,n.viewportScrollWidth=Math.max(f,p),n.viewportScrollHeight=Math.max(l,g),n.render(),n._scrollBy(0,0)},n._onScroll=function(){var s=n.wrapperElement,h=s.scrollLeft,c=s.scrollTop,u=n.zoom,f=u===void 0?O.zoom:u,l=h-n.scrollLeft,p=c-n.scrollTop,g=n.getScrollLeft(),_=n.getScrollTop();n.isLoop&&(n.isLoop=!1),n.scrollLeft=h,n.scrollTop=c,n.scrollTo(g+l/f,_+p/f)},n.onWheel=function(s){var h=n.options,c=h.pinchDirection,u=h.maxPinchWheel||1/0,f=s["".concat(n.wheelPinchKey,"Key")]||s.ctrlKey;if(h.useWheelPinch&&f){var l=s.deltaY,p=l>=0?1:-1,g=Math.min(u,Math.abs(l));l=p*g;var _=-l,m=Math.max(1+_*(h.wheelScale||.01),Qe);clearTimeout(n._tempRectTimer),n._tempRectTimer=window.setTimeout(function(){n._tempRect=null},100),n._triggerPinch({distance:g,scale:m,rotation:0,zoom:n.zoom*m,zoomX:n.zoomX*(c==="vertical"?1:m),zoomY:n.zoomY*(c==="horizontal"?1:m),inputEvent:s,isWheel:!0,clientX:s.clientX,clientY:s.clientY,ratioX:0,ratioY:0})}else if(h.useWheelScroll){var E=s.deltaX,l=s.deltaY;s.shiftKey&&!E&&(E=l,l=0),n.scrollBy(E/n.zoomX,l/n.zoomY)}else return;s.preventDefault()},n.onGestureStart=function(s){n._tempScale=[n.zoomX,n.zoomY],n._setClientRect(),s.preventDefault()},n.onGestureChange=function(s){if(s.preventDefault(),n.gesto.isFlag()||!n._tempScale){n._tempScale=[1,1];return}var h=s.scale,c=n._tempScale[0],u=n._tempScale[1],f=n.options.pinchDirection;n._triggerPinch({distance:0,scale:h,rotation:s.rotation,inputEvent:s,isWheel:!0,zoom:(c+u)*h/2,zoomX:c*(f==="vertical"?1:h),zoomY:u*(f==="horizontal"?1:h),clientX:s.clientX,clientY:s.clientY,ratioX:0,ratioY:0})},n.onGestureEnd=function(){},Dt(t)?(n._viewportElement=t,n.options=P(P({},O),o)):(n._viewportElement=e.children[0],n.options=P(P({},O),t)),n.init(),n}var i=r.prototype;return i.getContainer=function(){return this._containerElement},i.getWheelContainer=function(){return this._wheelContainerElement},i.getViewport=function(){return this._viewportElement},i.getWrapper=function(){return this.wrapperElement},i.geScrollArea=function(){return this.scrollAreaElement},i.destroy=function(){this.off(),this.gesto.unset(),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),this.injectResult.destroy();var e=this._containerElement;this._onDestroys.forEach(function(t){t()}),D(this.wrapperElement,"scroll",this._onScroll),D(this._wheelContainerElement,"wheel",this.onWheel),D(e,"gesturestart",this.onGestureStart),D(e,"gesturechange",this.onGestureChange),D(e,"gesturesend",this.onGestureEnd),this.gesto=null,this.injectResult=null,this._containerElement=null,this._viewportElement=null,this.options=null},i.getScrollTop=function(e){e===void 0&&(e={});var t=!1,o=!1;Z(e)?(t=e.range,o=e.absolute):t=e;var n=this.zoomY,s=this.scrollTop/n+this.offsetY+(t?N(this.getRangeY()[0]):0);return o?s*n:s},i.getScrollLeft=function(e){e===void 0&&(e={});var t=!1,o=!1;Z(e)?(t=e.range,o=e.absolute):t=e;var n=this.zoomX,s=this.scrollLeft/n+this.offsetX+(t?N(this.getRangeX()[0]):0);return o?s*n:s},i.getScrollWidth=function(e){var t=this._getScrollRangeX(),o=this.zoomX,n=this.containerWidth/o+N(t[0])+t[1];return e?n:n*o},i.getScrollHeight=function(e){var t=this._getScrollRangeY(),o=this.zoomY,n=this.containerHeight/o+N(t[0])+t[1];return e?n:n*o},i.scrollCenter=function(e){e===void 0&&(e={}),this.resize();var t=this.zoomX,o=this.zoomY,n=-(this.containerWidth/t-this.viewportWidth)/2,s=-(this.containerHeight/o-this.viewportHeight)/2;return e.absolute&&(n*=t,s*=o),e.horizontal===!1&&(n=this.getScrollLeft()),e.vertical===!1&&(s=this.getScrollTop()),this.scrollTo(n,s,e)},i.setTo=function(e){var t=e.x,o=t===void 0?this.getScrollLeft():t,n=e.y,s=n===void 0?this.getScrollTop():n,h=e.zoom,c=h===void 0?[this.getZoomX(),this.getZoomY()]:h,u=e.duration,f=this,l=f.zoomX,p=f.zoomY,g=f.zoomRange,_=this,m=_.zoomOffsetX,E=m===void 0?O.zoomOffsetX:m,v=_.zoomOffsetY,w=v===void 0?O.zoomOffsetY:v;"zoomOffsetX"in e&&(E=e.zoomOffsetX),"zoomOffsetY"in e&&(w=e.zoomOffsetY);var S=$(c)?c:[c,c],y=S[0],C=S[1],b=this.zoomRangeX||g,z=this.zoomRangeY||g,x=W(y,b[0],b[1]),A=W(C,z[0],z[1]),M=L("".concat(E),this.viewportWidth)*(1/l-1/x),R=L("".concat(w),this.viewportHeight)*(1/p-1/A);this.scrollTo(o-M,s-R,{duration:u}),this.setZoom(c,{zoomOffsetX:E,zoomOffsetY:w,duration:u,zoomBase:"fixed"})},i.setBy=function(e){var t=e.x,o=t===void 0?0:t,n=e.y,s=n===void 0?0:n,h=e.zoom,c=h===void 0?[0,0]:h,u=$(c)?c:[c,c],f=u[0],l=u[1];this.setTo(P(P({},e),{x:this.getScrollLeft()+o,y:this.getScrollTop()+s,zoom:[this.zoomX+f,this.zoomY+l]}))},i.scrollBy=function(e,t,o){if(this._pauseScrollAnimation(),!o||!o.duration){var n=this.getScrollLeft(),s=this.getScrollTop();return o!=null&&o.absolute&&(n*=this.zoomX,s*=this.zoomY),this._scrollTo(n+e,s+t,o)}else return this._startScrollAnimation([e,t],o),!0},i.scrollTo=function(e,t,o){if(this._pauseScrollAnimation(),!o||!o.duration)return this._scrollTo(e,t,o);var n=this.getScrollLeft(),s=this.getScrollTop();return o!=null&&o.absolute&&(n*=this.zoomX,s*=this.zoomY),this.scrollBy(e-n,t-s,o)},i.zoomBy=function(e,t){this._pauseZoomAnimation();var o=$(e)?e:[e,e],n=o[0],s=o[1];!t||!t.duration?this._setZoom([this.zoomX+n,this.zoomY+s],t):this._startZoomAnimation([n,s],t)},i.setZoom=function(e,t){if(this._pauseZoomAnimation(),!t||!t.duration)this._setZoom(e,t);else{var o=$(e)?e:[e,e],n=o[0],s=o[1];this._startZoomAnimation([n-this.zoomX,s-this.zoomY],t)}},i.getViewportWidth=function(){return this.viewportWidth},i.getViewportHeight=function(){return this.viewportWidth},i.getViewportScrollWidth=function(){return this.viewportScrollWidth},i.getViewportScrollHeight=function(){return this.viewportScrollHeight},i.getContainerWidth=function(){return this.containerWidth},i.getContainerHeight=function(){return this.containerHeight},i.getZoom=function(){return(this.zoomX+this.zoomY)/2},i.getZoomX=function(){return this.zoomX},i.getZoomY=function(){return this.zoomY},i.getRangeX=function(e,t){return this._getRangeCoord("horizontal",e,t)},i.getRangeY=function(e,t){return this._getRangeCoord("vertical",e,t)},i.init=function(){var e=this,t,o=this._containerElement,n=this.options,s=wt(o),h=V(o),c=n.wrapperElement||o.querySelector(".".concat(Rt)),u=n.scrollAreaElement||o.querySelector(".".concat(Ot)),f=n.horizontalScrollElement||o.querySelector(".".concat(oe)),l=n.verticalScrollElement||o.querySelector(".".concat(ae));c||(c=s.createElement("div"),c.insertBefore(this._viewportElement,null),o.insertBefore(c,null)),this.wrapperElement=c,u||(u=s.createElement("div"),c.insertBefore(u,c.firstChild)),this.scrollAreaElement=u,H(o,le),H(c,Rt),H(u,Ot);var p=new Lt(o,"horizontal",f),g=new Lt(o,"vertical",l);this.horizontalScrollbar=p,this.verticalScrollbar=g,p.on("scroll",function(v){e.scrollBy(v.delta/e.zoomX,0)}),g.on("scroll",function(v){e.scrollBy(0,v.delta/e.zoomY)}),p.isAppend&&o.insertBefore(p.barElement,null),g.isAppend&&o.insertBefore(g.barElement,null),this.injectResult=se.inject(o,{nonce:this.options.cspNonce});var _=n.wheelContainer,m=null;if(_&&(Ht(_)?m=s.querySelector(_):Dt(_)?m=_:("value"in _||"current"in _)&&(m=_.current||_.value)),m||(m=o),this._wheelContainerElement=m,this.gesto=new Gt(o,{container:V(o),events:["touch","mouse"],preventWheelClick:(t=this.options.preventWheelClick)!==null&&t!==void 0?t:!0}).on("dragStart",function(v){var w=v.inputEvent,S=v.stop,y=v.datas;if(!e.useMouseDrag&&v.isMouseEvent){S();return}e._pauseScrollAnimation(),e.dragFlag=!1;var C=e.trigger("dragStart",v);if(C===!1){S();return}w.preventDefault(),y.startEvent=w}).on("drag",function(v){!e.options.usePinch||v.isPinch||e.useMouseDrag&&v.isMouseEvent?(e.trigger("drag",P(P({},v),{inputEvent:v.inputEvent})),tn(v),e.scrollBy(-v.deltaX/e.zoomX,-v.deltaY/e.zoomY)):!e.dragFlag&&v.movement>n.pinchThreshold&&(e.dragFlag=!0,e.trigger("abortPinch",{inputEvent:v.datas.startEvent||v.inputEvent}))}).on("dragEnd",function(v){e.trigger("dragEnd",{isDrag:v.isDrag,isDouble:v.isDouble,inputEvent:v.inputEvent}),e._startScrollAnimationBySpeed(v.datas.speed)}).on("pinchStart",function(v){var w=v.inputEvent,S=v.datas,y=v.stop;w.preventDefault(),e._pauseScrollAnimation(),S.startZoom=[e.zoomX,e.zoomY];var C=e.trigger("pinchStart",{inputEvent:w});C===!1&&y(),e._setClientRect()}).on("pinch",function(v){var w=v.scale,S=e.options.pinchDirection;e._triggerPinch({rotation:v.rotation,distance:v.distance,scale:v.scale,inputEvent:v.inputEvent,isWheel:!1,zoom:v.datas.startZoom*w,zoomX:e.zoomX*(S==="vertical"?1:w),zoomY:e.zoomY*(S==="horizontal"?1:w),clientX:v.clientX,clientY:v.clientY,ratioX:0,ratioY:0})}).on("pinchEnd",function(){e._tempRect=null}),T(c,"scroll",this._onScroll),n.useResizeObserver){var E=new h.ResizeObserver(function(){e.resize()});E.observe(this._viewportElement),E.observe(this._containerElement),this._onDestroys.push(function(){E.disconnect()})}else T(h,"resize",this.resize),this._onDestroys.push(function(){D(h,"resize",e.resize)});(n.useWheelPinch||n.useWheelScroll)&&T(m,"wheel",this.onWheel,{passive:!1}),n.useGesture&&(T(o,"gesturestart",this.onGestureStart,{passive:!1}),T(o,"gesturechange",this.onGestureChange,{passive:!1})),this.resize()},i.render=function(){var e=this,t=e.offsetX,o=e.offsetY,n=e.zoomX,s=n===void 0?O.zoomX:n,h=e.zoomY,c=h===void 0?O.zoomY:h,u=e.translateZ,f=u===void 0?0:u;e.rangeX,e.rangeY,e.containerWidth,e.containerHeight;var l=this.options.useTransform,p=l===void 0?O.useTransform:l,g=-t*s,_=-o*c;this.scrollAreaElement.style.cssText="width:calc(100% + ".concat(this.getScrollAreaWidth(),"px);")+"height:calc(100% + ".concat(this.getScrollAreaHeight(),"px);");var m=this._viewportElement.style;p===!1?m.cssText+="position: relative; left: ".concat(g,"px; top: ").concat(_,"px; "):m.cssText+="transform-origin: 0 0;"+"transform:translate3d(".concat(g,"px, ").concat(_,"px, ").concat(f,"px) scale(").concat(s,", ").concat(c,");"),this.renderScroll()},i.renderScroll=function(){var e=this,t=e.zoomX,o=e.zoomY,n=e.containerWidth,s=e.containerHeight,h=this.horizontalScrollbar,c=this.verticalScrollbar;if(this.options.useBounceScrollBar){var u=this.getScrollLeft(!0)*t,f=this.getRangeX(!0),l=n+N(f[0])+N(f[1]),p=this.getScrollTop(!0)*o,g=this.getRangeY(!0),_=s+N(g[0])+N(g[1]);h.render(this.displayHorizontalScroll,u,n,l),c.render(this.displayVerticalScroll,p,s,_)}else{var m=this._getScrollRangeX(),E=this._getScrollRangeY(),u=this.getScrollLeft(),p=this.getScrollTop(),l=this.containerWidth+N(m[0])+m[1],_=this.containerHeight+N(E[0])+E[1];h.render(this.displayHorizontalScroll,u-m[0],n,l),c.render(this.displayVerticalScroll,p-E[0],s,_)}},i.move=function(e,t){var o=this.wrapperElement;o.scrollLeft=e,o.scrollTop=t},i.setDisplayVerticalScroll=function(e){this.options.displayVerticalScroll=e,this.renderScroll()},i.setDisplayHorizontalScroll=function(e){this.options.displayHorizontalScroll=e,this.renderScroll()},i._startZoomAnimation=function(e,t){var o=this;if(e){var n=t.duration,s=t.easing||Mt;Nt(function(h){return o._setZoom([o.zoomX+e[0]*h,o.zoomY+e[1]*h],t)},function(h){o._zoomTimer=requestAnimationFrame(h)},{easing:s,duration:n})}},i._startScrollAnimation=function(e,t){var o=this;if(!(!e[0]&&!e[1])){var n=t.duration,s=t.easing||Mt;Nt(function(h){return o._scrollBy(e[0]*h,e[1]*h,t)},function(h){o._scrollTimer=requestAnimationFrame(h)},{easing:s,duration:n})}},i._startScrollAnimationBySpeed=function(e){if(!(!e||!e[0]&&!e[1])){var t=-6e-4,o=ue(e,t),n=en(e,t);return this._startScrollAnimation(n,{duration:o})}},i._pauseScrollAnimation=function(){cancelAnimationFrame(this._scrollTimer),this._scrollTimer=0},i._pauseZoomAnimation=function(){cancelAnimationFrame(this._zoomTimer),this._zoomTimer=0},i.getScrollAreaWidth=function(){var e=this.getRangeX(!0),t=e[0],o=e[1];return t||o?this.margin*2:0},i.getScrollAreaHeight=function(){var e=this.getRangeY(!0),t=e[0],o=e[1];return t||o?this.margin*2:0},i._triggerPinch=function(e){var t=e.clientX,o=e.clientY,n=e.zoomX,s=e.zoomY;this.useAutoZoom&&this._zoomByClient([n,s],t,o),this._tempRect||this._setClientRect();var h=this.zoomRange,c=this.zoomRangeX||h,u=this.zoomRangeY||h,f=this._tempRect,l=f.left,p=f.top,g=f.width,_=f.height,m=(t-l)/g*100,E=(o-p)/_*100;this.trigger("pinch",P(P({},e),{zoom:W((n+s)/2,h[0],h[1]),zoomX:W(n,c[0],c[1]),zoomY:W(s,u[0],u[1]),ratioX:m,ratioY:E}))},i._setClientRect=function(){var e=this.getContainer().getBoundingClientRect();this._tempRect={left:e.left,top:e.top,width:e.width,height:e.height}},i._zoomByClient=function(e,t,o){this._tempRect||this._setClientRect();var n=this._tempRect,s=n.left,h=n.top,c=n.width,u=n.height,f=this.options,l=f.zoomOffsetX,p=f.zoomOffsetY;f.zoomOffsetX="".concat((t-s)/c*100,"%"),f.zoomOffsetY="".concat((o-h)/u*100,"%"),this._setZoom(e,{zoomBase:"screen"}),f.zoomOffsetX=l,f.zoomOffsetY=p},i._setZoom=function(e,t){t===void 0&&(t={});var o=t.zoomBase,n=this,s=n.containerWidth,h=n.containerHeight,c=n.zoomX,u=n.zoomY,f=n.zoomRange,l=this,p=l.zoomOffsetX,g=p===void 0?O.zoomOffsetX:p,_=l.zoomOffsetY,m=_===void 0?O.zoomOffsetY:_;"zoomOffsetX"in t&&(g=t.zoomOffsetX),"zoomOffsetY"in t&&(m=t.zoomOffsetY);var E=this.getScrollLeft(),v=this.getScrollTop(),w=$(e)?e:[e,e],S=w[0],y=w[1],C=this.zoomRangeX||f,b=this.zoomRangeY||f,z=W(S,C[0],C[1]),x=W(y,b[0],b[1]),A=this.options;A.zoomX=z,A.zoomY=x,A.zoom=(z+x)/2;var M=this.getScrollLeft(),R=this.getScrollTop(),X=0,j=0;o==="fixed"?(X=L("".concat(g),this.viewportWidth),j=L("".concat(m),this.viewportHeight)):o==="viewport"?(X=(-E+L("".concat(g),this.viewportWidth))*c,j=(-v+L("".concat(m),this.viewportHeight))*u):(X=L("".concat(g),s),j=L("".concat(m),h));var rt=E+X/c,J=v+j/u,it=M+X/z,ot=R+j/x;this._scrollBy(rt-it,J-ot,{zoom:!!(z-c||x-u)}),this.render()},i._scrollBy=function(e,t,o){var n=this.getScrollLeft(),s=this.getScrollTop();return o!=null&&o.absolute&&(n*=this.zoomX,s*=this.zoomY),this._scrollTo(n+e,s+t,o)},i._scrollTo=function(e,t,o){var n=this,s=this,h=s.scrollLeft,c=s.scrollTop,u=o==null?void 0:o.absolute;this._scrollToType("horizontal",e,u),this._scrollToType("vertical",t,u);var f=this.scrollLeft,l=this.scrollTop;this.render();var p=this.getScrollLeft(),g=this.getScrollTop();return this._emitScrollEvent(p,g,o==null?void 0:o.zoom),Math.round(h)!==f||Math.round(c)!==l?(this.isLoop=!0,this.move(f,l),requestAnimationFrame(function(){if(n.isLoop){n.isLoop=!1;var _=n.wrapperElement,m=_.scrollLeft,E=_.scrollTop;n.scrollLeft=m,n.scrollTop=E,(f!==Math.round(m)||l!==Math.round(E))&&n._scrollTo(p,g)}}),!1):!0},i._scrollToType=function(e,t,o){var n=Pt[e],s=this,h=s.margin,c=h===void 0?O.margin:h,u=s.threshold,f=u===void 0?O.threshold:u,l=this["scroll".concat(n.pos)],p=this["getRange".concat(n.coord)](!0,!0),g=p[0],_=p[1],m=Math.round(l),E=this["getScrollArea".concat(n.size)](),v=this["zoom".concat(n.coord)];o&&(t=t/v);var w=t*v;if(g===_)m=g,t=g/v;else if(w-f<=g){var S=Math.max(0,w-g);m=S,t=(g+S)/v}else if(w+f>=_){var y=Math.max(0,_-w);m=E-y,t=(_-y)/v}else m<f?m+=c:m>E-f&&(m-=c);m=Math.round(m),this["scroll".concat(n.pos)]=m,this["offset".concat(n.coord)]=t-m/v},i._getRangeCoord=function(e,t,o){var n=this,s=n.margin,h=s===void 0?O.margin:s,c=n.threshold,u=Pt[e],f=jt(this["range".concat(u.coord)],O["range".concat(u.coord)]),l=jt(this["rangeOffset".concat(u.coord)],O["rangeOffset".concat(u.coord)]),p=this["zoom".concat(u.coord)],g=nn(this["getScroll".concat(u.pos)](),h,f,c,o);return t?[g[0]*p+l[0],this.options.useOverflowScroll?Math.max(this["viewport".concat(u.size)]*p-this["container".concat(u.size)],g[1]*p+l[1]):g[1]*p+l[1]]:[g[0]+l[0],g[1]+l[1]]},i._emitScrollEvent=function(e,t,o){var n=this._asLeft,s=this._asTop;!o&&n===e&&s===t||(this._asLeft=e,this._asTop=t,this.trigger("scroll",{scrollLeft:e,scrollTop:t,zoomX:this.zoomX,zoomY:this.zoomY}))},i._getScrollRangeX=function(){var e=this.getScrollLeft(),t=this.rangeX,o=t[0],n=t[1];this.useOverflowScroll&&isFinite(n)&&(n=Math.max(n,this.viewportWidth-this.containerWidth/this.zoomX));var s=Math.min(0,isFinite(o)?Math.min(o,e):e),h=Math.max(0,isFinite(n)?Math.max(n,e):e),c=this.viewportScrollWidth,u=Math.max(this.containerWidth/this.zoomX,c)-c,f=Math.min(0,u+s);return[f,h]},i._getScrollRangeY=function(){var e=this.getScrollTop(),t=this.rangeY,o=t[0],n=t[1];this.useOverflowScroll&&isFinite(n)&&(n=Math.max(n,this.viewportHeight-this.containerHeight/this.zoomY));var s=Math.min(0,isFinite(o)?Math.min(o,e):e),h=Math.max(0,isFinite(n)?Math.max(n,e):e),c=this.viewportScrollHeight,u=Math.max(this.containerHeight/this.zoomY,c)-c,f=Math.min(0,u+s);return[f,h]},r=$e([Ae(bt,function(e,t){var o={enumerable:!0,configurable:!0,get:function(){return this.options[t]}},n=$t("set ".concat(t));e[n]?o.set=function(s){this[n](s)}:o.set=function(s){this.options[t]=s},Object.defineProperty(e,t,o)})],r),r}(St),on=function(a){zt(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(rn);const F=window.React.createElement,an=window.React.PureComponent;var mt=function(a,r){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])},mt(a,r)};function sn(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");mt(a,r);function i(){this.constructor=a}a.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var nt=function(){return nt=Object.assign||function(r){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},nt.apply(this,arguments)};function ln(a,r,i,e){var t=arguments.length,o=t<3?r:e,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(a,r,i,e);else for(var s=a.length-1;s>=0;s--)(n=a[s])&&(o=(t<3?n(o):t>3?n(r,i,o):n(r,i))||o);return t>3&&o&&Object.defineProperty(r,i,o),o}var Wt=ce.map(function(a){return $t("on ".concat(a))}),cn=function(a){sn(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}var i=r.prototype;return i.render=function(){var e=this.props.className;return F("div",{className:"".concat(e||""," ").concat(le),ref:q(this,"containerElement")},F("div",{className:"infinite-viewer-wrapper",ref:q(this,"wrapperElement")},F("div",{className:"infinite-viewer-scroll-area",ref:q(this,"scrollAreaElement")}),this.props.children),F("div",{className:"infinite-viewer-scroll-bar infinite-viewer-horizontal-scroll-bar",ref:q(this,"horizontalScrollElement")},F("div",{className:"infinite-viewer-scroll-thumb"})),F("div",{className:"infinite-viewer-scroll-bar infinite-viewer-vertical-scroll-bar",ref:q(this,"verticalScrollElement")},F("div",{className:"infinite-viewer-scroll-thumb"})))},i.componentDidMount=function(){var e=this,t=this.props,o={};Je.forEach(function(n){n in t&&typeof t[n]<"u"&&(o[n]=t[n])}),this.infiniteViewer=new on(this.containerElement,this.scrollAreaElement.nextElementSibling,nt(nt({},o),{wrapperElement:this.wrapperElement,scrollAreaElement:this.scrollAreaElement,horizontalScrollElement:this.horizontalScrollElement,verticalScrollElement:this.verticalScrollElement})),ce.forEach(function(n,s){e.infiniteViewer.on(n,function(h){var c=e.props,u=c[Wt[s]]&&c[Wt[s]](h);u===!1&&h.stop()})})},i.componentDidUpdate=function(e){var t=this.props,o=this.infiniteViewer;bt.forEach(function(n){n in t&&o[n]!==t[n]&&(o[n]=t[n])})},i.componentWillUnmount=function(){this.infiniteViewer.destroy()},i.getElement=function(){return this.containerElement},ln([Me(Ke)],r.prototype,"infiniteViewer",void 0),r}(an);const un=window.React.forwardRef,hn=window.React.useImperativeHandle,Ft=window.React.useState,ct=window.antd.Form,fn=window.antd.Input,vn=window.antd.Modal;function dn(a,r){const[i,e]=Ft(!1),[t,o]=Ft(),[n]=ct.useForm();hn(r,()=>({open(c,u){e(!0),o({callback:u}),n.setFieldsValue({title:c})}}));const s=()=>{e(!1)},h=()=>{n.validateFields().then(c=>{t==null||t.callback(c.title),e(!1)}).catch(c=>{console.log(c)})};return d.jsx(d.Fragment,{children:d.jsx(vn,{title:"节点修改",open:i,onCancel:s,onOk:h,children:d.jsx(ct,{form:n,style:{width:"80%",margin:"20px auto 0"},children:d.jsx(ct.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入节点名称"}],children:d.jsx(fn,{placeholder:"请输入节点名称"})})})})})}const pn=un(dn),gn=window.React.forwardRef,mn=(a,r)=>d.jsx(d.Fragment,{children:"ActionModal"}),_n=gn(mn),wn=window.React.forwardRef,Sn=window.React.useImperativeHandle,kt=window.React.useRef,En=window.React.useState,yn=window.icons.DeleteOutlined,zn=window.icons.PlusOutlined;function B(a,r,i=null){for(let e=0;e<a.length;e++){if(a[e].id===r)return{index:e,parentNode:i,selfNode:a[e]};if(a[e].children){const t=B(a[e].children,r,a[e]);if(t)return t}}return null}function bn(a,r){const i=kt(),e=kt(),[t,o]=En([]);Sn(r,()=>({setNodeList(v){v.length===0?o([{id:"start",type:"start",title:"开始"},{id:"end",type:"end",title:"结束"}]):o(()=>[...v])},getNodeList:()=>t}));const n=({id:v})=>d.jsx("span",{className:"add-node-btn",children:d.jsxs("span",{className:"add-icon",children:[d.jsx(zn,{style:{fontSize:16,color:"#fff"}}),d.jsxs("div",{className:"popover",children:[d.jsx("a",{onClick:()=>h("normal",v),children:"普通节点"}),d.jsx("a",{onClick:()=>h("condition",v),children:"分支节点"})]})]})}),s=(v=8)=>v===4?Math.random().toString().slice(2,6):Math.random().toString().slice(2,10),h=(v,w)=>{var y;v==="normal"?(y=i.current)==null||y.open("节点"+s(4),C=>{S(C)}):S("");function S(C){var A,M;const b=JSON.parse(JSON.stringify(t)),z=B(b,w),x={id:s(),type:v,title:C,content:"行为配置",config:{},children:[]};if(z.parentNode)if(((A=z==null?void 0:z.parentNode)==null?void 0:A.type)==="condition"){if(v==="condition"){K.error("分支节点后第一个不能添加分支节点");return}z.parentNode.children[z.index].children.unshift(x)}else["normal","success","fail"].includes((M=z==null?void 0:z.parentNode)==null?void 0:M.type)&&(v==="normal"?z.parentNode.children.splice(z.index+1,0,x):z.parentNode.children.splice(z.index+1,0,{...x,children:[{...x,id:s(),type:"success",title:"成功",content:"成功时执行此流程",children:[]},{...x,id:s(),type:"fail",title:"失败",content:"失败时执行此流程",children:[]}]}));else if(v==="normal")b.splice(z.index+1,0,x);else{if(z.selfNode.type==="start"){K.error("开始节点后第一个不能添加分支节点");return}if(z.selfNode.type==="condition"){K.error("分支节点后第一个不能添加分支节点");return}b.splice(z.index+1,0,{...x,children:[{id:s(),type:"success",children:[],title:"成功",content:"成功时执行此流程"},{id:s(),type:"fail",title:"失败",content:"失败时执行此流程",children:[]}]})}o(()=>[...b])}},c=(v,w)=>{var C,b,z;v.stopPropagation();const S=JSON.parse(JSON.stringify(t)),y=B(S,w);if(!y.parentNode)S.splice(y.index,1);else if(["success","fail","normal"].includes((C=y==null?void 0:y.parentNode)==null?void 0:C.type))y.parentNode.children.splice(y.index,1);else if(((b=y==null?void 0:y.parentNode)==null?void 0:b.type)==="condition"){const x=B(S,(z=y==null?void 0:y.parentNode)==null?void 0:z.id);x.parentNode?x.parentNode.children.splice(x.index,1):S.splice(x.index,1)}o(()=>[...S])},u=(v,w)=>{var S;v.stopPropagation(),!(w.title==="成功"||w.title==="失败")&&((S=i.current)==null||S.open(w.title,y=>{const C=JSON.parse(JSON.stringify(t)),b=B(C,w.id);b.selfNode.title=y,o(()=>[...C])}))},f=v=>{var w;if(v.title==="成功"||v.title==="失败"){K.info("请在此节点后新增执行节点");return}(w=e.current)==null||w.open(v.config,S=>{const y=JSON.parse(JSON.stringify(t)),C=B(y,v.id);C.selfNode.content=S.actionName,C.selfNode.config=S,o(()=>[...y])})};function l(v){return v.map(w=>{switch(w.type){case"start":return d.jsx(p,{},w.id);case"end":return d.jsx(g,{},w.id);case"normal":case"success":case"fail":return d.jsx(_,{node:w},w.id);case"condition":return d.jsx(m,{title:w.title,id:w.id,children:w.children.map((S,y)=>d.jsxs(E,{type:y===0?"start":y==w.children.length-1?"end":"center",children:[l([S]),l(S.children)]},S.id))},w.id)}})}const p=()=>d.jsxs("div",{className:"start-node",children:[d.jsx("div",{className:"circle-btn",children:"开始"}),d.jsx("span",{className:"arrow-line"}),d.jsx(n,{id:"start"})]}),g=()=>d.jsx("div",{className:"end-node",children:d.jsx("div",{className:"circle-btn gray",children:"结束"})}),_=({node:v})=>d.jsxs("div",{className:"normal-node",children:[d.jsxs("div",{className:`node-info ${v.type}`,onClick:()=>f(v),children:[d.jsx("div",{className:"title",onClick:w=>u(w,v),children:v.title}),d.jsx("div",{className:"content",children:v.content}),d.jsx(yn,{className:"icon-del",onClick:w=>c(w,v.id)})]}),d.jsx("span",{className:"arrow-line"}),d.jsx(n,{id:v.id})]}),m=({children:v,id:w})=>d.jsxs("div",{className:"condition-node",children:[d.jsx("div",{className:"title",children:"分支"}),d.jsx("div",{className:"node-list",children:v}),d.jsx("span",{className:"arrow-line"}),d.jsx(n,{id:w})]}),E=({type:v,children:w})=>d.jsxs("div",{className:"node-item",children:[d.jsx("span",{className:"left-line "+v}),d.jsx("span",{className:"right-line "+v}),d.jsx("span",{className:"connect-line"}),d.jsx("div",{className:"normal-container",children:w})]});return d.jsxs(d.Fragment,{children:[d.jsx(cn,{className:"node-viewer dot",displayHorizontalScroll:!1,useMouseDrag:!0,useWheelScroll:!0,useAutoZoom:!0,zoomRange:[.5,10],zoom:1.5,useResizeObserver:!0,children:d.jsx("div",{className:"node-container",children:l(t)})}),d.jsx(pn,{ref:i}),d.jsx(_n,{ref:e})]})}const Cn=wn(bn),xn=window.antd.Alert,It=window.antd.Button,Dn=window.antd.Drawer,Tn=window.antd.Space,Yn=window.React.forwardRef,Xn=window.React.useImperativeHandle,Rn=window.React.useRef,Bt=window.React.useState;function On(a,r){const[i,e]=Bt(!1),[t,o]=Bt(),n=Rn(null);Xn(r,()=>({open(c,u){o({callback:u}),e(!0),setTimeout(()=>{var f;(f=n.current)==null||f.setNodeList(c)})}}));const s=()=>{var u;const c=(u=n.current)==null?void 0:u.getNodeList();t==null||t.callback(c),e(!1)},h=()=>{e(!1)};return d.jsxs(Dn,{title:"事件流配置",width:"100vw",height:"100vh",placement:"top",push:!1,open:i,closeIcon:null,onClose:h,extra:d.jsx(d.Fragment,{children:d.jsxs(Tn,{children:[d.jsx(It,{type:"primary",onClick:s,children:"保存"}),d.jsx(It,{onClick:h,children:"关闭"})]})}),children:[d.jsx(xn,{message:"使用说明",description:d.jsxs("div",{children:[d.jsx("p",{children:"1. 事件流从左到右按顺序执行。"}),d.jsx("p",{children:"2. 参数会在事件流中流转，比如点击表格的编辑按钮，事件流默认可以取到表格对应的行数据对象，传递到下一个节点。"}),d.jsx("p",{children:"3. 可以通过脚本运行来干预数据输出和下一个节点的流转。"}),d.jsx("p",{children:"4. 获取表单数据时，可以直接点开行为配置，点击获取表单值，选择对应表单即可。"})]}),type:"info",showIcon:!0,style:{position:"absolute",top:100,zIndex:99}}),d.jsx(Cn,{ref:n})]})}const An=Yn(On),Mn="_event_1d6b6_1",Pn="_title_1d6b6_6",jn="_ml5_1d6b6_22",Nn="_addAction_1d6b6_26",Ln="_eventFlow_1d6b6_31",I={event:Mn,title:Pn,ml5:jn,addAction:Nn,eventFlow:Ln},Wn=window.React.memo,Fn=window.React.useRef,kn=window.React.useEffect,ut=window.antd.Form,In=window.antd.Dropdown,Bn=window.antd.Button,Hn=window.icons.PlusOutlined,Vn=window.icons.DeleteOutlined,$n=Wn(()=>{var s,h,c;const a=Fn(),r=he(),[i]=ut.useForm();kn(()=>{var f;i.resetFields();let u=[];r.selectedElement?u=(((f=r.page.elementsMap[r.selectedElement.id])==null?void 0:f.config)||{}).events||[]:u=r.page.config.events||[],i.setFieldsValue({events:u})},[r.selectedElement]);const e=(s=r.selectedElement)!=null&&s.id?(c=(h=r.page.elementsMap[r.selectedElement.id])==null?void 0:h.events)==null?void 0:c.map(u=>({key:u.value,label:u.name})):r.page.events.map(u=>({key:u.value,label:u.name})),t=(u,f)=>{var l;(l=r.selectedElement)!=null&&l.id?r.editElement({id:r.selectedElement.id,type:"events",events:f.events||[]}):r.savePageInfo({type:"events",events:f.events||[]})},o=u=>{var f;(f=a.current)==null||f.open(i.getFieldValue(["events",u,"actions"]),l=>{i.setFieldValue(["events",u,"actions"],l),t(null,i.getFieldsValue())})},n={labelCol:{span:7},wrapperCol:{span:15}};return d.jsxs(d.Fragment,{children:[d.jsx(ut,{form:i,...n,onValuesChange:t,children:d.jsx("div",{style:{marginBottom:10},children:d.jsx(ut.List,{name:["events"],children:(u,{add:f,remove:l})=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:I.event,children:d.jsx(In,{menu:{items:e,onClick:({key:p})=>{var _;const g=(_=e==null?void 0:e.find(m=>(m==null?void 0:m.key)===p))==null?void 0:_.label;f({nickName:g,eventName:p,actions:[]})}},placement:"bottom",children:d.jsxs("a",{onClick:p=>p.preventDefault(),children:[d.jsx(Hn,{}),d.jsx("span",{className:I.ml5,children:"添加事件"})]})})}),u.map(({key:p,name:g})=>d.jsxs("div",{className:I.eventFlow,children:[d.jsxs("h2",{className:I.title,children:[d.jsx("span",{children:i.getFieldValue(["events",g,"nickName"])}),d.jsx(Vn,{onClick:()=>l(g),className:I.ml5})]}),d.jsx("div",{className:I.addAction,children:d.jsx(Bn,{type:"primary",onClick:()=>o(g),children:"设置事件流"})})]},"event"+p))]})})})}),d.jsx(An,{ref:a})]})});export{$n as default};
