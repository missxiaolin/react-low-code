import{u as d,j as g}from"./index-CISSGvlG.js";import{i as p}from"./util-BKa5BsPH.js";import{L as f,l as b,F as v}from"./index-Cd8mrToj.js";const x=window.React.useEffect,C=window.React.useRef;function P({height:s,language:r,value:o,onChange:a}){const m=d(e=>e.theme),t=f(),u=C(null);x(()=>{t==null||t.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(e,n){const i=e.getWordUntilPosition(n),c={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:i.startColumn,endColumn:i.endColumn};return{suggestions:l(c)}}})},[t]);function l(e){return t?[{label:"context",kind:t.languages.CompletionItemKind.Function,documentation:"context是一个全局上下文变量",insertText:"context",range:e},{label:"variable",kind:t.languages.CompletionItemKind.Function,documentation:"variable是一个系统变量",insertText:"variable",range:e},{label:"eventParams",kind:t.languages.CompletionItemKind.Function,documentation:"eventParams是事件流参数",insertText:"eventParams",range:e}]:[]}return b.config({paths:{vs:`${window.location.origin}/static/monaco-editor/min/vs`}}),g.jsx(v,{height:s||"150px",language:r||"javascript",theme:m==="dark"?"vs-dark":"vs-light",value:p(o)?typeof o=="string"?o:JSON.stringify(o,null,2):"",onChange:a,onMount:(e,n)=>{u.current={editor:e,monaco:n}},options:{lineNumbers:"on",minimap:{enabled:!1}}})}export{P as V};
