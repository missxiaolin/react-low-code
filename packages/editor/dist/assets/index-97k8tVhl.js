import{j as l,m as Q,u as gt}from"./index-C6R2FIrg.js";import{V as wt}from"./VariableBind-IxQkgJEJ.js";import{V as _t}from"./VsEditor-_GCfIG6j.js";import"./util-CaPtpbjW.js";import"./index-CYu5uZR4.js";var St="function",yt="object",xt="string",Et="undefined",bt=typeof document!==Et&&document,zt=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ee={cm:function(s){return s*96/2.54},mm:function(s){return s*96/254},in:function(s){return s*96},pt:function(s){return s*96/72},pc:function(s){return s*96/6},"%":function(s,r){return s*r/100},vw:function(s,r){return r===void 0&&(r=window.innerWidth),s/100*r},vh:function(s,r){return r===void 0&&(r=window.innerHeight),s/100*r},vmax:function(s,r){return r===void 0&&(r=Math.max(window.innerWidth,window.innerHeight)),s/100*r},vmin:function(s,r){return r===void 0&&(r=Math.min(window.innerWidth,window.innerHeight)),s/100*r}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ct(){for(var s=0,r=0,i=arguments.length;r<i;r++)s+=arguments[r].length;for(var t=Array(s),e=0,r=0;r<i;r++)for(var o=arguments[r],n=0,a=o.length;n<a;n++,e++)t[e]=o[n];return t}function Z(s){return s&&typeof s===yt}function q(s){return Array.isArray(s)}function Ge(s){return typeof s===xt}function Tt(s){return typeof s===St}function jt(s,r){var i=s===""||s==" ",t=r===""||r==" ";return t&&i||s===r}function Je(s,r,i,t,e){var o=Ee(s,r,i);return o?i:Dt(s,r,i+1,t,e)}function Ee(s,r,i){if(!s.ignore)return null;var t=r.slice(Math.max(i-3,0),i+3).join("");return new RegExp(s.ignore).exec(t)}function Dt(s,r,i,t,e){for(var o=function(h){var f=r[h].trim();if(f===s.close&&!Ee(s,r,h))return{value:h};var d=h,u=me(e,function(g){var w=g.open;return w===f});if(u&&(d=Je(u,r,h,t,e)),d===-1)return n=h,"break";h=d,n=h},n,a=i;a<t;++a){var c=o(a);if(a=n,typeof c=="object")return c.value;if(c==="break")break}return-1}function Ke(s,r){var i=Ge(r)?{separator:r}:r,t=i.separator,e=t===void 0?",":t,o=i.isSeparateFirst,n=i.isSeparateOnlyOpenClose,a=i.isSeparateOpenClose,c=a===void 0?n:a,h=i.openCloseCharacters,f=h===void 0?zt:h,d=f.map(function(b){var E=b.open,C=b.close;return E===C?E:E+"|"+C}).join("|"),u="(\\s*"+e+"\\s*|"+d+"|\\s+)",g=new RegExp(u,"g"),w=s.split(g).filter(function(b){return b&&b!=="undefined"}),p=w.length,m=[],y=[];function v(){return y.length?(m.push(y.join("")),y=[],!0):!1}for(var _=function(b){var E=w[b].trim(),C=b,O=me(f,function(X){var k=X.open;return k===E}),M=me(f,function(X){var k=X.close;return k===E});if(O){if(C=Je(O,w,b,p,f),C!==-1&&c)return v()&&o||(m.push(w.slice(b,C+1).join("")),b=C,o)?(S=b,"break"):(S=b,"continue")}else if(M&&!Ee(M,w,b)){var R=Ct(f);return R.splice(f.indexOf(M),1),{value:Ke(s,{separator:e,isSeparateFirst:o,isSeparateOnlyOpenClose:n,isSeparateOpenClose:c,openCloseCharacters:R})}}else if(jt(E,e)&&!n)return v(),o?(S=b,"break"):(S=b,"continue");C===-1&&(C=p-1),y.push(w.slice(b,C+1).join("")),b=C,S=b},S,x=0;x<p;++x){var z=_(x);if(x=S,typeof z=="object")return z.value;if(z==="break")break}return y.length&&m.push(y.join("")),m}function Yt(s){return Ke(s,",")}function Xt(s){var r=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(s);if(!r)return{prefix:"",unit:"",value:NaN};var i=r[1],t=r[2],e=r[3];return{prefix:i,unit:e,value:parseFloat(t)}}function Qe(s){return s.replace(/[\s-_]+([^\s-_])/g,function(r,i){return i.toUpperCase()})}function Xe(){return Date.now?Date.now():new Date().getTime()}function et(s,r,i){i===void 0&&(i=-1);for(var t=s.length,e=0;e<t;++e)if(r(s[e],e,s))return e;return i}function me(s,r,i){var t=et(s,r);return t>-1?s[t]:i}function F(s,r){var i=Xt(s),t=i.value,e=i.unit;if(Z(r)){var o=r[e];if(o){if(Tt(o))return o(t);if(ee[e])return ee[e](t,o)}}else if(e==="%")return t*r/100;return ee[e]?ee[e](t):t}function I(s,r,i){return Math.max(r,Math.min(s,i))}function Rt(s,r){var i=1/r;return Math.round(s/r)/i}function H(s,r){s.classList?s.classList.add(r):s.className+=" "+r}function j(s,r,i,t){s.addEventListener(r,i,t)}function T(s,r,i,t){s.removeEventListener(r,i,t)}function be(s){return(s==null?void 0:s.ownerDocument)||bt}function $(s){var r;return((r=s==null?void 0:s.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window}function At(s){return s&&"postMessage"in s&&"blur"in s&&"self"in s}function Re(s){return Z(s)&&s.nodeName&&s.nodeType&&"ownerDocument"in s}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ge=function(){return ge=Object.assign||function(r){for(var i,t=1,e=arguments.length;t<e;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},ge.apply(this,arguments)};function Ot(){for(var s=0,r=0,i=arguments.length;r<i;r++)s+=arguments[r].length;for(var t=Array(s),e=0,r=0;r<i;r++)for(var o=arguments[r],n=0,a=o.length;n<a;n++,e++)t[e]=o[n];return t}var ze=function(){function s(){this._events={}}var r=s.prototype;return r.on=function(i,t){if(Z(i))for(var e in i)this.on(e,i[e]);else this._addEvent(i,t,{});return this},r.off=function(i,t){if(!i)this._events={};else if(Z(i))for(var e in i)this.off(e);else if(!t)this._events[i]=[];else{var o=this._events[i];if(o){var n=et(o,function(a){return a.listener===t});n>-1&&o.splice(n,1)}}return this},r.once=function(i,t){var e=this;return t&&this._addEvent(i,t,{once:!0}),new Promise(function(o){e._addEvent(i,o,{once:!0})})},r.emit=function(i,t){var e=this;t===void 0&&(t={});var o=this._events[i];if(!i||!o)return!0;var n=!1;return t.eventType=i,t.stop=function(){n=!0},t.currentTarget=this,Ot(o).forEach(function(a){a.listener(t),a.once&&e.off(i,a.listener)}),!n},r.trigger=function(i,t){return t===void 0&&(t={}),this.emit(i,t)},r._addEvent=function(i,t,e){var o=this._events;o[i]=o[i]||[];var n=o[i];n.push(ge({listener:t},e))},s}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var we=function(s,r){return we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])},we(s,r)};function Mt(s,r){we(s,r);function i(){this.constructor=s}s.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var D=function(){return D=Object.assign||function(r){for(var i,t=1,e=arguments.length;t<e;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},D.apply(this,arguments)};function Nt(s,r){var i=r[0]-s[0],t=r[1]-s[1],e=Math.atan2(t,i);return e>=0?e:e+Math.PI*2}function ue(s){return Nt([s[0].clientX,s[0].clientY],[s[1].clientX,s[1].clientY])/Math.PI*180}function kt(s){return s.touches&&s.touches.length>=2}function te(s){return s?s.touches?Ft(s.touches):[tt(s)]:[]}function Pt(s){return s&&(s.type.indexOf("mouse")>-1||"button"in s)}function Ae(s,r,i){var t=i.length,e=J(s,t),o=e.clientX,n=e.clientY,a=e.originalClientX,c=e.originalClientY,h=J(r,t),f=h.clientX,d=h.clientY,u=J(i,t),g=u.clientX,w=u.clientY,p=o-f,m=n-d,y=o-g,v=n-w;return{clientX:a,clientY:c,deltaX:p,deltaY:m,distX:y,distY:v}}function he(s){return Math.sqrt(Math.pow(s[0].clientX-s[1].clientX,2)+Math.pow(s[0].clientY-s[1].clientY,2))}function Ft(s){for(var r=Math.min(s.length,2),i=[],t=0;t<r;++t)i.push(tt(s[t]));return i}function tt(s){return{clientX:s.clientX,clientY:s.clientY}}function J(s,r){r===void 0&&(r=s.length);for(var i={clientX:0,clientY:0,originalClientX:0,originalClientY:0},t=Math.min(s.length,r),e=0;e<t;++e){var o=s[e];i.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,i.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,i.clientX+=o.clientX,i.clientY+=o.clientY}return r?{clientX:i.clientX/r,clientY:i.clientY/r,originalClientX:i.originalClientX/r,originalClientY:i.originalClientY/r}:i}var fe=function(){function s(r){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=r,this.prevClients=r,this.length=r.length}return s.prototype.getAngle=function(r){return r===void 0&&(r=this.prevClients),ue(r)},s.prototype.getRotation=function(r){return r===void 0&&(r=this.prevClients),ue(r)-ue(this.startClients)},s.prototype.getPosition=function(r,i){r===void 0&&(r=this.prevClients);var t=Ae(r||this.prevClients,this.prevClients,this.startClients),e=t.deltaX,o=t.deltaY;return this.movement+=Math.sqrt(e*e+o*o),this.prevClients=r,t},s.prototype.getPositions=function(r){r===void 0&&(r=this.prevClients);for(var i=this.prevClients,t=this.startClients,e=Math.min(this.length,i.length),o=[],n=0;n<e;++n)o[n]=Ae([r[n]],[i[n]],[t[n]]);return o},s.prototype.getMovement=function(r){var i=this.movement;if(!r)return i;var t=J(r,this.length),e=J(this.prevClients,this.length),o=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(o*o+n*n)+i},s.prototype.getDistance=function(r){return r===void 0&&(r=this.prevClients),he(r)},s.prototype.getScale=function(r){return r===void 0&&(r=this.prevClients),he(r)/he(this.startClients)},s.prototype.move=function(r,i){this.startClients.forEach(function(t){t.clientX-=r,t.clientY-=i}),this.prevClients.forEach(function(t){t.clientX-=r,t.clientY-=i})},s}(),Oe=["textarea","input"],nt=function(s){Mt(r,s);function r(i,t){t===void 0&&(t={});var e=s.call(this)||this;e.options={},e.flag=!1,e.pinchFlag=!1,e.data={},e.isDrag=!1,e.isPinch=!1,e.clientStores=[],e.targets=[],e.prevTime=0,e.doubleFlag=!1,e._useMouse=!1,e._useTouch=!1,e._useDrag=!1,e._dragFlag=!1,e._isTrusted=!1,e._isMouseEvent=!1,e._isSecondaryButton=!1,e._preventMouseEvent=!1,e._prevInputEvent=null,e._isDragAPI=!1,e._isIdle=!0,e._preventMouseEventId=0,e._window=window,e.onDragStart=function(u,g){if(g===void 0&&(g=!0),!(!e.flag&&u.cancelable===!1)){var w=u.type.indexOf("drag")>=-1;if(!(e.flag&&w)){e._isDragAPI=!0;var p=e.options,m=p.container,y=p.pinchOutside,v=p.preventWheelClick,_=p.preventRightClick,S=p.preventDefault,x=p.checkInput,z=p.dragFocusedInput,b=p.preventClickEventOnDragStart,E=p.preventClickEventOnDrag,C=p.preventClickEventByCondition,O=e._useTouch,M=!e.flag;if(e._isSecondaryButton=u.which===3||u.button===2,v&&(u.which===2||u.button===1)||_&&(u.which===3||u.button===2))return e.stop(),!1;if(M){var R=e._window.document.activeElement,X=u.target;if(X){var k=X.tagName.toLowerCase(),ae=Oe.indexOf(k)>-1,K=X.isContentEditable;if(ae||K){if(x||!z&&R===X)return!1;if(R&&(R===X||K&&R.isContentEditable&&R.contains(X)))if(z)X.blur();else return!1}else if((S||u.type==="touchstart")&&R){var le=R.tagName.toLowerCase();(R.isContentEditable||Oe.indexOf(le)>-1)&&R.blur()}(b||E||C)&&j(e._window,"click",e._onClick,!0)}e.clientStores=[new fe(te(u))],e._isIdle=!1,e.flag=!0,e.isDrag=!1,e._isTrusted=g,e._dragFlag=!0,e._prevInputEvent=u,e.data={},e.doubleFlag=Xe()-e.prevTime<200,e._isMouseEvent=Pt(u),!e._isMouseEvent&&e._preventMouseEvent&&e._allowMouseEvent();var ce=e._preventMouseEvent||e.emit("dragStart",D(D({data:e.data,datas:e.data,inputEvent:u,isMouseEvent:e._isMouseEvent,isSecondaryButton:e._isSecondaryButton,isTrusted:g,isDouble:e.doubleFlag},e.getCurrentStore().getPosition()),{preventDefault:function(){u.preventDefault()},preventDrag:function(){e._dragFlag=!1}}));ce===!1&&e.stop(),e._isMouseEvent&&e.flag&&S&&u.preventDefault()}if(!e.flag)return!1;var Ye=0;if(M?(e._attchDragEvent(),O&&y&&(Ye=setTimeout(function(){j(m,"touchstart",e.onDragStart,{passive:!1})}))):O&&y&&T(m,"touchstart",e.onDragStart),e.flag&&kt(u)){if(clearTimeout(Ye),M&&u.touches.length!==u.changedTouches.length)return;e.pinchFlag||e.onPinchStart(u)}}}},e.onDrag=function(u,g){if(e.flag){var w=e.options.preventDefault;!e._isMouseEvent&&w&&u.preventDefault(),e._prevInputEvent=u;var p=te(u),m=e.moveClients(p,u,!1);if(e._dragFlag){if(e.pinchFlag||m.deltaX||m.deltaY){var y=e._preventMouseEvent||e.emit("drag",D(D({},m),{isScroll:!!g,inputEvent:u}));if(y===!1){e.stop();return}}e.pinchFlag&&e.onPinch(u,p)}e.getCurrentStore().getPosition(p,!0)}},e.onDragEnd=function(u){if(e.flag){var g=e.options,w=g.pinchOutside,p=g.container,m=g.preventClickEventOnDrag,y=g.preventClickEventOnDragStart,v=g.preventClickEventByCondition,_=e.isDrag;(m||y||v)&&requestAnimationFrame(function(){e._allowClickEvent()}),!v&&!y&&m&&!_&&e._allowClickEvent(),e._useTouch&&w&&T(p,"touchstart",e.onDragStart),e.pinchFlag&&e.onPinchEnd(u);var S=u!=null&&u.touches?te(u):[],x=S.length;x===0||!e.options.keepDragging?e.flag=!1:e._addStore(new fe(S));var z=e._getPosition(),b=Xe(),E=!_&&e.doubleFlag;e._prevInputEvent=null,e.prevTime=_||E?0:b,e.flag||(e._dettachDragEvent(),e._preventMouseEvent||e.emit("dragEnd",D({data:e.data,datas:e.data,isDouble:E,isDrag:_,isClick:!_,isMouseEvent:e._isMouseEvent,isSecondaryButton:e._isSecondaryButton,inputEvent:u,isTrusted:e._isTrusted},z)),e.clientStores=[],e._isMouseEvent||(e._preventMouseEvent=!0,clearTimeout(e._preventMouseEventId),e._preventMouseEventId=setTimeout(function(){e._preventMouseEvent=!1},200)),e._isIdle=!0)}},e.onBlur=function(){e.onDragEnd()},e._allowClickEvent=function(){T(e._window,"click",e._onClick,!0)},e._onClick=function(u){e._allowClickEvent(),e._allowMouseEvent();var g=e.options.preventClickEventByCondition;g!=null&&g(u)||(u.stopPropagation(),u.preventDefault())},e._onContextMenu=function(u){var g=e.options;g.preventRightClick?e.onDragEnd(u):u.preventDefault()},e._passCallback=function(){};var o=[].concat(i),n=o[0];e._window=At(n)?n:$(n),e.options=D({checkInput:!1,container:n&&!("document"in n)?$(n):n,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},t);var a=e.options,c=a.container,h=a.events,f=a.checkWindowBlur;if(e._useDrag=h.indexOf("drag")>-1,e._useTouch=h.indexOf("touch")>-1,e._useMouse=h.indexOf("mouse")>-1,e.targets=o,e._useDrag&&o.forEach(function(u){j(u,"dragstart",e.onDragStart)}),e._useMouse&&(o.forEach(function(u){j(u,"mousedown",e.onDragStart),j(u,"mousemove",e._passCallback)}),j(c,"contextmenu",e._onContextMenu)),f&&j($(),"blur",e.onBlur),e._useTouch){var d={passive:!1};o.forEach(function(u){j(u,"touchstart",e.onDragStart,d),j(u,"touchmove",e._passCallback,d)})}return e}return r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(i){return this.getCurrentStore().getMovement(i)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(i,t,e,o){o===void 0&&(o=!0),this.flag&&(this.clientStores[0].move(i,t),o&&this.onDrag(e,!0))},r.prototype.move=function(i,t){var e=i[0],o=i[1],n=this.getCurrentStore(),a=n.prevClients;return this.moveClients(a.map(function(c){var h=c.clientX,f=c.clientY;return{clientX:h+e,clientY:f+o,originalClientX:h,originalClientY:f}}),t,!0)},r.prototype.triggerDragStart=function(i){this.onDragStart(i,!1)},r.prototype.setEventData=function(i){var t=this.data;for(var e in i)t[e]=i[e];return this},r.prototype.setEventDatas=function(i){return this.setEventData(i)},r.prototype.getCurrentEvent=function(i){return i===void 0&&(i=this._prevInputEvent),D(D({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:i})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var i=this,t=this.targets,e=this.options.container;this.off(),T(this._window,"blur",this.onBlur),this._useDrag&&t.forEach(function(o){T(o,"dragstart",i.onDragStart)}),this._useMouse&&(t.forEach(function(o){T(o,"mousedown",i.onDragStart)}),T(e,"contextmenu",this._onContextMenu)),this._useTouch&&(t.forEach(function(o){T(o,"touchstart",i.onDragStart)}),T(e,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(i){var t=this,e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var o=new fe(te(i));this.pinchFlag=!0,this._addStore(o);var n=this.emit("pinchStart",D(D({data:this.data,datas:this.data,angle:o.getAngle(),touches:this.getCurrentStore().getPositions()},o.getPosition()),{inputEvent:i,isTrusted:this._isTrusted,preventDefault:function(){i.preventDefault()},preventDrag:function(){t._dragFlag=!1}}));n===!1&&(this.pinchFlag=!1)}},r.prototype.onPinch=function(i,t){if(!(!this.flag||!this.pinchFlag||t.length<2)){var e=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",D(D({data:this.data,datas:this.data,movement:this.getMovement(t),angle:e.getAngle(t),rotation:e.getRotation(t),touches:e.getPositions(t),scale:e.getScale(t),distance:e.getDistance(t)},e.getPosition(t)),{inputEvent:i,isTrusted:this._isTrusted}))}},r.prototype.onPinchEnd=function(i){if(this.pinchFlag){var t=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var e=this.getCurrentStore();this.emit("pinchEnd",D(D({data:this.data,datas:this.data,isPinch:t,touches:e.getPositions()},e.getPosition()),{inputEvent:i}))}},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(i,t,e){var o=this._getPosition(i,e),n=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!n&&this.isDrag&&(a=!0),D(D({data:this.data,datas:this.data},o),{movement:this.getMovement(i),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:t,isTrusted:this._isTrusted,isFirstDrag:a})},r.prototype._addStore=function(i){this.clientStores.splice(0,0,i)},r.prototype._getPosition=function(i,t){var e=this.getCurrentStore(),o=e.getPosition(i,t),n=this.clientStores.slice(1).reduce(function(h,f){var d=f.getPosition();return h.distX+=d.distX,h.distY+=d.distY,h},o),a=n.distX,c=n.distY;return D(D({},o),{distX:a,distY:c})},r.prototype._attchDragEvent=function(){var i=this._window,t=this.options.container,e={passive:!1};this._isDragAPI&&(j(t,"dragover",this.onDrag,e),j(i,"dragend",this.onDragEnd)),this._useMouse&&(j(t,"mousemove",this.onDrag),j(i,"mouseup",this.onDragEnd)),this._useTouch&&(j(t,"touchmove",this.onDrag,e),j(i,"touchend",this.onDragEnd,e),j(i,"touchcancel",this.onDragEnd,e))},r.prototype._dettachDragEvent=function(){var i=this._window,t=this.options.container;this._isDragAPI&&(T(t,"dragover",this.onDrag),T(i,"dragend",this.onDragEnd)),this._useMouse&&(T(t,"mousemove",this.onDrag),T(i,"mouseup",this.onDragEnd)),this._useTouch&&(T(t,"touchstart",this.onDragStart),T(t,"touchmove",this.onDrag),T(i,"touchend",this.onDragEnd),T(i,"touchcancel",this.onDragEnd))},r.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},r}(ze);function It(s,r){return r.replace(/([^}{]*){/gm,function(i,t){return t.replace(/\.([^{,\s\d.]+)/g,"."+s+"$1")+"{"})}function U(s,r){return function(i){i&&(s[r]=i)}}function Lt(s,r){return function(i){var t=i.prototype;s.forEach(function(e){r(t,e)})}}function Wt(s,r){return r===void 0&&(r={}),function(i,t){s.forEach(function(e){var o=r[e]||e;o in i||(i[o]=function(){for(var n,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var h=(n=this[t])[e].apply(n,a);return h===this[t]?this:h})})}}function Bt(s){for(var r=5381,i=s.length;i;)r=r*33^s.charCodeAt(--i);return r>>>0}var Vt=Bt;function Ht(s){return Vt(s).toString(36)}function $t(s){if(s&&s.getRootNode){var r=s.getRootNode();if(r.nodeType===11)return r}}function Zt(s,r,i){return i.original?r:r.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(t,e){var o=e.trim();return(o?Yt(o):[""]).map(function(n){var a=n.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(s))):a?".".concat(s," ").concat(a):".".concat(s)}).join(", ")+" {"})}function qt(s,r,i,t,e){var o=be(t),n=o.createElement("style");return n.setAttribute("type","text/css"),n.setAttribute("data-styled-id",s),n.setAttribute("data-styled-count","1"),i.nonce&&n.setAttribute("nonce",i.nonce),n.innerHTML=Zt(s,r,i),(e||o.head||o.body).appendChild(n),n}function Ut(s){var r="rCS"+Ht(s);return{className:r,inject:function(i,t){t===void 0&&(t={});var e=$t(i),o=(e||i.ownerDocument||document).querySelector('style[data-styled-id="'.concat(r,'"]'));if(!o)o=qt(r,s,t,i,e);else{var n=parseFloat(o.getAttribute("data-styled-count"))||0;o.setAttribute("data-styled-count","".concat(n+1))}return{destroy:function(){var a,c=parseFloat(o.getAttribute("data-styled-count"))||0;c<=1?(o.remove?o.remove():(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=null):o.setAttribute("data-styled-count","".concat(c-1))}}}}}function Ce(s,r){for(var i=s.length,t=0;t<i;++t)if(r(s[t],t))return!0;return!1}function rt(s,r){for(var i=s.length,t=0;t<i;++t)if(r(s[t],t))return s[t];return null}function it(s){var r=s;if(typeof r>"u"){if(typeof navigator>"u"||!navigator)return"";r=navigator.userAgent||""}return r.toLowerCase()}function Te(s,r){try{return new RegExp(s,"g").exec(r)}catch{return null}}function Gt(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var s=navigator.userAgentData,r=s.brands||s.uaList;return!!(r&&r.length)}function Jt(s,r){var i=Te("("+s+")((?:\\/|\\s|:)([0-9|\\.|_]+))",r);return i?i[3]:""}function _e(s){return s.replace(/_/g,".")}function G(s,r){var i=null,t="-1";return Ce(s,function(e){var o=Te("("+e.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",r);return!o||e.brand?!1:(i=e,t=o[3]||"-1",e.versionAlias?t=e.versionAlias:e.versionTest&&(t=Jt(e.versionTest.toLowerCase(),r)||t),t=_e(t),!0)}),{preset:i,version:t}}function ne(s,r){var i={brand:"",version:"-1"};return Ce(s,function(t){var e=ot(r,t);return e?(i.brand=t.id,i.version=t.versionAlias||e.version,i.version!=="-1"):!1}),i}function ot(s,r){return rt(s,function(i){var t=i.brand;return Te(""+r.test,t.toLowerCase())})}var st=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],at=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Se=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],lt=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],ct=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function ut(s){return!!G(lt,s).preset}function Kt(s){var r=it(s),i=!!/mobi/g.exec(r),t={name:"unknown",version:"-1",majorVersion:-1,webview:ut(r),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},e={name:"unknown",version:"-1",majorVersion:-1},o=G(st,r),n=o.preset,a=o.version,c=G(ct,r),h=c.preset,f=c.version,d=G(at,r);if(t.chromium=!!d.preset,t.chromiumVersion=d.version,!t.chromium){var u=G(Se,r);t.webkit=!!u.preset,t.webkitVersion=u.version}return h&&(e.name=h.id,e.version=f,e.majorVersion=parseInt(f,10)),n&&(t.name=n.id,t.version=a,t.webview&&e.name==="ios"&&t.name!=="safari"&&(t.webview=!1)),t.majorVersion=parseInt(t.version,10),{browser:t,os:e,isMobile:i,isHints:!1}}function Qt(s){var r=navigator.userAgentData,i=(r.uaList||r.brands).slice(),t=r.mobile||!1,e=i[0],o=(r.platform||navigator.platform).toLowerCase(),n={name:e.brand,version:e.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ne(lt,i).brand||ut(it())},a={name:"unknown",version:"-1",majorVersion:-1};n.webkit=!n.chromium&&Ce(Se,function(u){return ot(i,u)});var c=ne(at,i);if(n.chromium=!!c.brand,n.chromiumVersion=c.version||"-1",!n.chromium){var h=ne(Se,i);n.webkit=!!h.brand,n.webkitVersion=h.version||"-1"}var f=rt(ct,function(u){return new RegExp(""+u.test,"g").exec(o)});a.name=f?f.id:"";{var d=ne(st,i);n.name=d.brand||n.name,n.version=d.brand&&s?s.uaFullVersion:d.version}return n.webkit&&(a.name=t?"ios":"mac"),a.name==="ios"&&n.webview&&(n.version="-1"),a.version=_e(a.version),n.version=_e(n.version),a.majorVersion=parseInt(a.version,10),n.majorVersion=parseInt(n.version,10),{browser:n,os:a,isMobile:t,isHints:!0}}function en(s){return Gt()?Qt():Kt(s)}var ye=function(s,r){return ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])},ye(s,r)};function je(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");ye(s,r);function i(){this.constructor=s}s.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var N=function(){return N=Object.assign||function(r){for(var i,t=1,e=arguments.length;t<e;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},N.apply(this,arguments)};function tn(s,r,i,t){var e=arguments.length,o=e<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,i):t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,r,i,t);else for(var a=s.length-1;a>=0;a--)(n=s[a])&&(o=(e<3?n(o):e>3?n(r,i,o):n(r,i))||o);return e>3&&o&&Object.defineProperty(r,i,o),o}function Me(s,r,i){if(i||arguments.length===2)for(var t=0,e=r.length,o;t<e;t++)(o||!(t in r))&&(o||(o=Array.prototype.slice.call(r,0,t)),o[t]=r[t]);return s.concat(o||Array.prototype.slice.call(r))}var nn=en(),rn=nn.browser.name==="safari",W="infinite-viewer-",Ne="".concat(W,"wrapper"),ke="".concat(W,"scroll-area"),on="".concat(W,"scroll-bar"),ht="".concat(W,"horizontal-scroll-bar"),ft="".concat(W,"vertical-scroll-bar"),Pe="".concat(W,"scroll-thumb"),dt=Ut(It(W,`
{
    position: relative;
    overscroll-behavior: none;
}
.wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: auto;
    scrollbar-width: none;
    top: 0;
    left: 0;
    will-change: scroll-position;
}
.restrict-wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
}
.wrapper::-webkit-scrollbar {
    display: none;
}
.scroll-area {
    position:absolute;
    top:0;
    left:0;
    transform-origin: 0 0;
}
.scroll-bar {
    position:absolute;
    width: 10px;
    height: 10px;
    box-sizing: border-box;
    right: 0;
    bottom: 0;
    overflow: hidden;
}
.horizontal-scroll-bar {
    width: calc(100% - 20px);
    right: 10px;
    height: 14px;
}
.vertical-scroll-bar {
    height: calc(100% - 20px);
    bottom: 10px;
    width: 14px;
}
.scroll-thumb {
    position:relative;
    opacity: 0.7;
    background: #333;
    border-radius: 3px;
    left: 0px;
    top: 0px;
    z-index: 10;
    width: 6px;
    height: 6px;
    transition: all ease 0.2s;
    opacity: 0;
}
.scroll-bar:hover .scroll-thumb {
    border-radius: 5px;
    opacity: 1;
}
.horizontal-scroll-bar .scroll-thumb {
    margin: 4px 0px;
    transition-property: opacity, margin, height, border-radius;
}
.vertical-scroll-bar .scroll-thumb {
    margin: 0px 4px;
    transition-property: opacity, margin, width, border-radius;
}
.horizontal-scroll-bar:hover .scroll-thumb {
    height: 10px;
    margin: 2px 0px;
}
.vertical-scroll-bar:hover .scroll-thumb {
    width: 10px;
    margin: 0px 2px;
}
`)),A={margin:500,threshold:100,zoom:1,zoomX:1,zoomY:1,rangeX:[-1/0,1/0],rangeY:[-1/0,1/0],rangeOffsetX:[0,0],rangeOffsetY:[0,0],wrapperElement:null,scrollAreaElement:null,horizontalScrollElement:null,verticalScrollElement:null,usePinch:!1,useAutoZoom:!1,useMouseDrag:!1,pinchThreshold:30,cspNonce:"",maxPinchWheel:1/0,wheelScale:.01,displayHorizontalScroll:!0,displayVerticalScroll:!0,useTransform:!0,useWheelPinch:!0,zoomRange:[.001,1/0],wheelPinchKey:"ctrl",useWheelScroll:rn,zoomOffsetX:"50%",zoomOffsetY:"50%",translateZ:0,useGesture:!0,useResizeObserver:!1,pinchDirection:"all",preventWheelClick:!0,useBounceScrollBar:!1,useOverflowScroll:!1},Fe=function(s){return 1-Math.pow(1-s,3)},Ie={horizontal:{pos:"Left",coord:"X",size:"Width"},vertical:{pos:"Top",coord:"Y",size:"Height"}},vt=dt.className,De=["margin","threshold","zoomOffsetX","zoomOffsetY","zoom","zoomX","zoomY","rangeX","rangeY","rangeOffsetX","rangeOffsetY","usePinch","useMouseDrag","pinchThreshold","maxPinchWheel","wheelScale","displayVerticalScroll","displayHorizontalScroll","translateZ","useAutoZoom","wheelPinchKey","zoomRange","zoomRangeX","zoomRangeY","pinchDirection","useOverflowScroll"],sn=Me(Me([],De,!0),["preventWheelClick","useWheelPinch","useWheelScroll","useGesture","cspNonce","wrapperElement","scrollAreaElement","verticalScrollElement","horizontalScrollElement","useResizeObserver","wheelContainer","useBounceScrollBar"],!1),pt=["scroll","abortPinch","dragStart","dragEnd","pinchStart","pinch"],an=["getScrollLeft","getScrollTop","getScrollWidth","getScrollHeight","getContainerWidth","getContainerHeight","getViewportWidth","getViewportHeight","getViewportScrollWidth","getViewportScrollHeight","scrollTo","scrollBy","zoomBy","scrollCenter","getContainer","getViewport","getWrapper","setZoom","getRangeX","getRangeY","resize","getZoom","getZoomX","getZoomY","getWheelContainer","setTo","setBy"],ln=1e-6;function cn(s){var r=s.deltaX,i=s.deltaY,t=s.datas,e=Date.now(),o=t.speed;if(!o){t.speed=[0,0],t.time=e;return}var n=e-t.time;t.speed=[o[0]/2+r/n,o[1]/2+i/n]}function mt(s,r){var i=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return Math.abs(i/r)}function un(s,r){var i=mt(s,r);return[-s[0]/2*i,-s[1]/2*i]}function P(s){return Math.abs(s)}function hn(s,r,i,t,e){var o=e||isFinite(i[0])?i[0]:Math.min(-1,Math.floor(s/r))*r-t,n=e||isFinite(i[1])?i[1]:Math.max(1,Math.ceil(s/r))*r+t;return[o,n]}function Le(s,r){return s??r}function We(s,r,i){var t=i.duration,e=i.easing||function(c){return 1-Math.pow(1-c,3)},o=Date.now(),n=o,a=function(){var c=Date.now(),h=c-o;t<h&&(h=t);var f=e(h/t),d=e((n-o)/t);n=c,s(f-d),!(h>=t)&&r(a)};r(a)}var Be=function(s){je(r,s);function r(t,e,o){var n=s.call(this)||this;n.type=e,n.isAppend=!1,n.size=0,n.scrollSize=0,n.isHorizontal=!1,n._onDragStart=function(d){var u=n.isHorizontal,g=d.inputEvent.target,w=d.datas,p=n.thumbElement===g;p||setTimeout(function(){requestAnimationFrame(function(){var m=n.thumbElement.getBoundingClientRect(),y=m[u?"left":"top"],v=m[u?"width":"height"],_=y+v,S=d[u?"clientX":"clientY"];if(!(y<=S&&S<=_)){var x=n.size,z=x*x/n.scrollSize;n.scrollBy(y<S?z:-z)}})},100),w.isThumb=p,d.inputEvent.stopPropagation(),d.inputEvent.preventDefault()},n._onDrag=function(d){d.datas.isThumb&&n.scrollBy(n.isHorizontal?d.deltaX:d.deltaY)},n._onWheel=function(d){var u=n.isHorizontal?d.deltaX:d.deltaY;u&&d.preventDefault(),n.trigger("scroll",{delta:u})};var a=e==="horizontal",c=be(t),h,f=o;return o?h=o.querySelector(".".concat(Pe)):(f=c.createElement("div"),h=c.createElement("div"),f.insertBefore(h,null),n.isAppend=!0),H(f,a?ht:ft),H(f,on),H(h,Pe),n.thumbElement=h,n.barElement=f,n.isHorizontal=a,n.gesto=new nt(f,{container:$(c)}).on("dragStart",function(d){return n._onDragStart(d)}).on("drag",function(d){return n._onDrag(d)}),j(n.barElement,"wheel",n._onWheel,{passive:!1}),n}var i=r.prototype;return i.scrollBy=function(t,e){var o=t/this.size;this.trigger("scroll",{delta:e?t:this.scrollSize*o})},i.render=function(t,e,o,n){this.size=o,this.scrollSize=n;var a=t&&Rt(n-o,.001)>0?1:0,c=this.isHorizontal?["X","width"]:["Y","height"],h=c[0],f=c[1],d=o/n*100,u=Math.max(0,e)/n*100;this.thumbElement.style.cssText+="".concat(f,": ").concat(d,"%;opacity: ").concat(a,";")+"transform: translate".concat(h,"(").concat(100/d*u,"%)")},i.destroy=function(){T(this.barElement,"wheel",this._onWheel),this.gesto.off(),this.off()},r}(ze),fn=function(s){je(r,s);function r(t,e,o){e===void 0&&(e={}),o===void 0&&(o={});var n=s.call(this)||this;return n._containerElement=t,n.offsetX=0,n.offsetY=0,n.containerWidth=0,n.containerHeight=0,n.viewportWidth=0,n.viewportHeight=0,n.viewportScrollWidth=0,n.viewportScrollHeight=0,n.scrollLeft=0,n.scrollTop=0,n._scrollTimer=0,n._zoomTimer=0,n._viewportElement=null,n._wheelContainerElement=null,n.dragFlag=!1,n.isLoop=!1,n._tempScale=[1,1],n._tempRect=null,n._tempRectTimer=null,n._onDestroys=[],n._asLeft=0,n._asTop=0,n.resize=function(){var a=n._containerElement,c=a.offsetWidth,h=a.offsetHeight,f=n._viewportElement,d=f.offsetWidth,u=f.offsetHeight,g=f.scrollWidth,w=f.scrollHeight;n.containerWidth=c,n.containerHeight=h,n.viewportWidth=d,n.viewportHeight=u,n.viewportScrollWidth=Math.max(d,g),n.viewportScrollHeight=Math.max(u,w),n.render(),n._scrollBy(0,0)},n._onScroll=function(){var a=n.wrapperElement,c=a.scrollLeft,h=a.scrollTop,f=n.zoom,d=f===void 0?A.zoom:f,u=c-n.scrollLeft,g=h-n.scrollTop,w=n.getScrollLeft(),p=n.getScrollTop();n.isLoop&&(n.isLoop=!1),n.scrollLeft=c,n.scrollTop=h,n.scrollTo(w+u/d,p+g/d)},n.onWheel=function(a){var c=n.options,h=c.pinchDirection,f=c.maxPinchWheel||1/0,d=a["".concat(n.wheelPinchKey,"Key")]||a.ctrlKey;if(c.useWheelPinch&&d){var u=a.deltaY,g=u>=0?1:-1,w=Math.min(f,Math.abs(u));u=g*w;var p=-u,m=Math.max(1+p*(c.wheelScale||.01),ln);clearTimeout(n._tempRectTimer),n._tempRectTimer=window.setTimeout(function(){n._tempRect=null},100),n._triggerPinch({distance:w,scale:m,rotation:0,zoom:n.zoom*m,zoomX:n.zoomX*(h==="vertical"?1:m),zoomY:n.zoomY*(h==="horizontal"?1:m),inputEvent:a,isWheel:!0,clientX:a.clientX,clientY:a.clientY,ratioX:0,ratioY:0})}else if(c.useWheelScroll){var y=a.deltaX,u=a.deltaY;a.shiftKey&&!y&&(y=u,u=0),n.scrollBy(y/n.zoomX,u/n.zoomY)}else return;a.preventDefault()},n.onGestureStart=function(a){n._tempScale=[n.zoomX,n.zoomY],n._setClientRect(),a.preventDefault()},n.onGestureChange=function(a){if(a.preventDefault(),n.gesto.isFlag()||!n._tempScale){n._tempScale=[1,1];return}var c=a.scale,h=n._tempScale[0],f=n._tempScale[1],d=n.options.pinchDirection;n._triggerPinch({distance:0,scale:c,rotation:a.rotation,inputEvent:a,isWheel:!0,zoom:(h+f)*c/2,zoomX:h*(d==="vertical"?1:c),zoomY:f*(d==="horizontal"?1:c),clientX:a.clientX,clientY:a.clientY,ratioX:0,ratioY:0})},n.onGestureEnd=function(){},Re(e)?(n._viewportElement=e,n.options=N(N({},A),o)):(n._viewportElement=t.children[0],n.options=N(N({},A),e)),n.init(),n}var i=r.prototype;return i.getContainer=function(){return this._containerElement},i.getWheelContainer=function(){return this._wheelContainerElement},i.getViewport=function(){return this._viewportElement},i.getWrapper=function(){return this.wrapperElement},i.geScrollArea=function(){return this.scrollAreaElement},i.destroy=function(){this.off(),this.gesto.unset(),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),this.injectResult.destroy();var t=this._containerElement;this._onDestroys.forEach(function(e){e()}),T(this.wrapperElement,"scroll",this._onScroll),T(this._wheelContainerElement,"wheel",this.onWheel),T(t,"gesturestart",this.onGestureStart),T(t,"gesturechange",this.onGestureChange),T(t,"gesturesend",this.onGestureEnd),this.gesto=null,this.injectResult=null,this._containerElement=null,this._viewportElement=null,this.options=null},i.getScrollTop=function(t){t===void 0&&(t={});var e=!1,o=!1;Z(t)?(e=t.range,o=t.absolute):e=t;var n=this.zoomY,a=this.scrollTop/n+this.offsetY+(e?P(this.getRangeY()[0]):0);return o?a*n:a},i.getScrollLeft=function(t){t===void 0&&(t={});var e=!1,o=!1;Z(t)?(e=t.range,o=t.absolute):e=t;var n=this.zoomX,a=this.scrollLeft/n+this.offsetX+(e?P(this.getRangeX()[0]):0);return o?a*n:a},i.getScrollWidth=function(t){var e=this._getScrollRangeX(),o=this.zoomX,n=this.containerWidth/o+P(e[0])+e[1];return t?n:n*o},i.getScrollHeight=function(t){var e=this._getScrollRangeY(),o=this.zoomY,n=this.containerHeight/o+P(e[0])+e[1];return t?n:n*o},i.scrollCenter=function(t){t===void 0&&(t={}),this.resize();var e=this.zoomX,o=this.zoomY,n=-(this.containerWidth/e-this.viewportWidth)/2,a=-(this.containerHeight/o-this.viewportHeight)/2;return t.absolute&&(n*=e,a*=o),t.horizontal===!1&&(n=this.getScrollLeft()),t.vertical===!1&&(a=this.getScrollTop()),this.scrollTo(n,a,t)},i.setTo=function(t){var e=t.x,o=e===void 0?this.getScrollLeft():e,n=t.y,a=n===void 0?this.getScrollTop():n,c=t.zoom,h=c===void 0?[this.getZoomX(),this.getZoomY()]:c,f=t.duration,d=this,u=d.zoomX,g=d.zoomY,w=d.zoomRange,p=this,m=p.zoomOffsetX,y=m===void 0?A.zoomOffsetX:m,v=p.zoomOffsetY,_=v===void 0?A.zoomOffsetY:v;"zoomOffsetX"in t&&(y=t.zoomOffsetX),"zoomOffsetY"in t&&(_=t.zoomOffsetY);var S=q(h)?h:[h,h],x=S[0],z=S[1],b=this.zoomRangeX||w,E=this.zoomRangeY||w,C=I(x,b[0],b[1]),O=I(z,E[0],E[1]),M=F("".concat(y),this.viewportWidth)*(1/u-1/C),R=F("".concat(_),this.viewportHeight)*(1/g-1/O);this.scrollTo(o-M,a-R,{duration:f}),this.setZoom(h,{zoomOffsetX:y,zoomOffsetY:_,duration:f,zoomBase:"fixed"})},i.setBy=function(t){var e=t.x,o=e===void 0?0:e,n=t.y,a=n===void 0?0:n,c=t.zoom,h=c===void 0?[0,0]:c,f=q(h)?h:[h,h],d=f[0],u=f[1];this.setTo(N(N({},t),{x:this.getScrollLeft()+o,y:this.getScrollTop()+a,zoom:[this.zoomX+d,this.zoomY+u]}))},i.scrollBy=function(t,e,o){if(this._pauseScrollAnimation(),!o||!o.duration){var n=this.getScrollLeft(),a=this.getScrollTop();return o!=null&&o.absolute&&(n*=this.zoomX,a*=this.zoomY),this._scrollTo(n+t,a+e,o)}else return this._startScrollAnimation([t,e],o),!0},i.scrollTo=function(t,e,o){if(this._pauseScrollAnimation(),!o||!o.duration)return this._scrollTo(t,e,o);var n=this.getScrollLeft(),a=this.getScrollTop();return o!=null&&o.absolute&&(n*=this.zoomX,a*=this.zoomY),this.scrollBy(t-n,e-a,o)},i.zoomBy=function(t,e){this._pauseZoomAnimation();var o=q(t)?t:[t,t],n=o[0],a=o[1];!e||!e.duration?this._setZoom([this.zoomX+n,this.zoomY+a],e):this._startZoomAnimation([n,a],e)},i.setZoom=function(t,e){if(this._pauseZoomAnimation(),!e||!e.duration)this._setZoom(t,e);else{var o=q(t)?t:[t,t],n=o[0],a=o[1];this._startZoomAnimation([n-this.zoomX,a-this.zoomY],e)}},i.getViewportWidth=function(){return this.viewportWidth},i.getViewportHeight=function(){return this.viewportWidth},i.getViewportScrollWidth=function(){return this.viewportScrollWidth},i.getViewportScrollHeight=function(){return this.viewportScrollHeight},i.getContainerWidth=function(){return this.containerWidth},i.getContainerHeight=function(){return this.containerHeight},i.getZoom=function(){return(this.zoomX+this.zoomY)/2},i.getZoomX=function(){return this.zoomX},i.getZoomY=function(){return this.zoomY},i.getRangeX=function(t,e){return this._getRangeCoord("horizontal",t,e)},i.getRangeY=function(t,e){return this._getRangeCoord("vertical",t,e)},i.init=function(){var t=this,e,o=this._containerElement,n=this.options,a=be(o),c=$(o),h=n.wrapperElement||o.querySelector(".".concat(Ne)),f=n.scrollAreaElement||o.querySelector(".".concat(ke)),d=n.horizontalScrollElement||o.querySelector(".".concat(ht)),u=n.verticalScrollElement||o.querySelector(".".concat(ft));h||(h=a.createElement("div"),h.insertBefore(this._viewportElement,null),o.insertBefore(h,null)),this.wrapperElement=h,f||(f=a.createElement("div"),h.insertBefore(f,h.firstChild)),this.scrollAreaElement=f,H(o,vt),H(h,Ne),H(f,ke);var g=new Be(o,"horizontal",d),w=new Be(o,"vertical",u);this.horizontalScrollbar=g,this.verticalScrollbar=w,g.on("scroll",function(v){t.scrollBy(v.delta/t.zoomX,0)}),w.on("scroll",function(v){t.scrollBy(0,v.delta/t.zoomY)}),g.isAppend&&o.insertBefore(g.barElement,null),w.isAppend&&o.insertBefore(w.barElement,null),this.injectResult=dt.inject(o,{nonce:this.options.cspNonce});var p=n.wheelContainer,m=null;if(p&&(Ge(p)?m=a.querySelector(p):Re(p)?m=p:("value"in p||"current"in p)&&(m=p.current||p.value)),m||(m=o),this._wheelContainerElement=m,this.gesto=new nt(o,{container:$(o),events:["touch","mouse"],preventWheelClick:(e=this.options.preventWheelClick)!==null&&e!==void 0?e:!0}).on("dragStart",function(v){var _=v.inputEvent,S=v.stop,x=v.datas;if(!t.useMouseDrag&&v.isMouseEvent){S();return}t._pauseScrollAnimation(),t.dragFlag=!1;var z=t.trigger("dragStart",v);if(z===!1){S();return}_.preventDefault(),x.startEvent=_}).on("drag",function(v){!t.options.usePinch||v.isPinch||t.useMouseDrag&&v.isMouseEvent?(t.trigger("drag",N(N({},v),{inputEvent:v.inputEvent})),cn(v),t.scrollBy(-v.deltaX/t.zoomX,-v.deltaY/t.zoomY)):!t.dragFlag&&v.movement>n.pinchThreshold&&(t.dragFlag=!0,t.trigger("abortPinch",{inputEvent:v.datas.startEvent||v.inputEvent}))}).on("dragEnd",function(v){t.trigger("dragEnd",{isDrag:v.isDrag,isDouble:v.isDouble,inputEvent:v.inputEvent}),t._startScrollAnimationBySpeed(v.datas.speed)}).on("pinchStart",function(v){var _=v.inputEvent,S=v.datas,x=v.stop;_.preventDefault(),t._pauseScrollAnimation(),S.startZoom=[t.zoomX,t.zoomY];var z=t.trigger("pinchStart",{inputEvent:_});z===!1&&x(),t._setClientRect()}).on("pinch",function(v){var _=v.scale,S=t.options.pinchDirection;t._triggerPinch({rotation:v.rotation,distance:v.distance,scale:v.scale,inputEvent:v.inputEvent,isWheel:!1,zoom:v.datas.startZoom*_,zoomX:t.zoomX*(S==="vertical"?1:_),zoomY:t.zoomY*(S==="horizontal"?1:_),clientX:v.clientX,clientY:v.clientY,ratioX:0,ratioY:0})}).on("pinchEnd",function(){t._tempRect=null}),j(h,"scroll",this._onScroll),n.useResizeObserver){var y=new c.ResizeObserver(function(){t.resize()});y.observe(this._viewportElement),y.observe(this._containerElement),this._onDestroys.push(function(){y.disconnect()})}else j(c,"resize",this.resize),this._onDestroys.push(function(){T(c,"resize",t.resize)});(n.useWheelPinch||n.useWheelScroll)&&j(m,"wheel",this.onWheel,{passive:!1}),n.useGesture&&(j(o,"gesturestart",this.onGestureStart,{passive:!1}),j(o,"gesturechange",this.onGestureChange,{passive:!1})),this.resize()},i.render=function(){var t=this,e=t.offsetX,o=t.offsetY,n=t.zoomX,a=n===void 0?A.zoomX:n,c=t.zoomY,h=c===void 0?A.zoomY:c,f=t.translateZ,d=f===void 0?0:f;t.rangeX,t.rangeY,t.containerWidth,t.containerHeight;var u=this.options.useTransform,g=u===void 0?A.useTransform:u,w=-e*a,p=-o*h;this.scrollAreaElement.style.cssText="width:calc(100% + ".concat(this.getScrollAreaWidth(),"px);")+"height:calc(100% + ".concat(this.getScrollAreaHeight(),"px);");var m=this._viewportElement.style;g===!1?m.cssText+="position: relative; left: ".concat(w,"px; top: ").concat(p,"px; "):m.cssText+="transform-origin: 0 0;"+"transform:translate3d(".concat(w,"px, ").concat(p,"px, ").concat(d,"px) scale(").concat(a,", ").concat(h,");"),this.renderScroll()},i.renderScroll=function(){var t=this,e=t.zoomX,o=t.zoomY,n=t.containerWidth,a=t.containerHeight,c=this.horizontalScrollbar,h=this.verticalScrollbar;if(this.options.useBounceScrollBar){var f=this.getScrollLeft(!0)*e,d=this.getRangeX(!0),u=n+P(d[0])+P(d[1]),g=this.getScrollTop(!0)*o,w=this.getRangeY(!0),p=a+P(w[0])+P(w[1]);c.render(this.displayHorizontalScroll,f,n,u),h.render(this.displayVerticalScroll,g,a,p)}else{var m=this._getScrollRangeX(),y=this._getScrollRangeY(),f=this.getScrollLeft(),g=this.getScrollTop(),u=this.containerWidth+P(m[0])+m[1],p=this.containerHeight+P(y[0])+y[1];c.render(this.displayHorizontalScroll,f-m[0],n,u),h.render(this.displayVerticalScroll,g-y[0],a,p)}},i.move=function(t,e){var o=this.wrapperElement;o.scrollLeft=t,o.scrollTop=e},i.setDisplayVerticalScroll=function(t){this.options.displayVerticalScroll=t,this.renderScroll()},i.setDisplayHorizontalScroll=function(t){this.options.displayHorizontalScroll=t,this.renderScroll()},i._startZoomAnimation=function(t,e){var o=this;if(t){var n=e.duration,a=e.easing||Fe;We(function(c){return o._setZoom([o.zoomX+t[0]*c,o.zoomY+t[1]*c],e)},function(c){o._zoomTimer=requestAnimationFrame(c)},{easing:a,duration:n})}},i._startScrollAnimation=function(t,e){var o=this;if(!(!t[0]&&!t[1])){var n=e.duration,a=e.easing||Fe;We(function(c){return o._scrollBy(t[0]*c,t[1]*c,e)},function(c){o._scrollTimer=requestAnimationFrame(c)},{easing:a,duration:n})}},i._startScrollAnimationBySpeed=function(t){if(!(!t||!t[0]&&!t[1])){var e=-6e-4,o=mt(t,e),n=un(t,e);return this._startScrollAnimation(n,{duration:o})}},i._pauseScrollAnimation=function(){cancelAnimationFrame(this._scrollTimer),this._scrollTimer=0},i._pauseZoomAnimation=function(){cancelAnimationFrame(this._zoomTimer),this._zoomTimer=0},i.getScrollAreaWidth=function(){var t=this.getRangeX(!0),e=t[0],o=t[1];return e||o?this.margin*2:0},i.getScrollAreaHeight=function(){var t=this.getRangeY(!0),e=t[0],o=t[1];return e||o?this.margin*2:0},i._triggerPinch=function(t){var e=t.clientX,o=t.clientY,n=t.zoomX,a=t.zoomY;this.useAutoZoom&&this._zoomByClient([n,a],e,o),this._tempRect||this._setClientRect();var c=this.zoomRange,h=this.zoomRangeX||c,f=this.zoomRangeY||c,d=this._tempRect,u=d.left,g=d.top,w=d.width,p=d.height,m=(e-u)/w*100,y=(o-g)/p*100;this.trigger("pinch",N(N({},t),{zoom:I((n+a)/2,c[0],c[1]),zoomX:I(n,h[0],h[1]),zoomY:I(a,f[0],f[1]),ratioX:m,ratioY:y}))},i._setClientRect=function(){var t=this.getContainer().getBoundingClientRect();this._tempRect={left:t.left,top:t.top,width:t.width,height:t.height}},i._zoomByClient=function(t,e,o){this._tempRect||this._setClientRect();var n=this._tempRect,a=n.left,c=n.top,h=n.width,f=n.height,d=this.options,u=d.zoomOffsetX,g=d.zoomOffsetY;d.zoomOffsetX="".concat((e-a)/h*100,"%"),d.zoomOffsetY="".concat((o-c)/f*100,"%"),this._setZoom(t,{zoomBase:"screen"}),d.zoomOffsetX=u,d.zoomOffsetY=g},i._setZoom=function(t,e){e===void 0&&(e={});var o=e.zoomBase,n=this,a=n.containerWidth,c=n.containerHeight,h=n.zoomX,f=n.zoomY,d=n.zoomRange,u=this,g=u.zoomOffsetX,w=g===void 0?A.zoomOffsetX:g,p=u.zoomOffsetY,m=p===void 0?A.zoomOffsetY:p;"zoomOffsetX"in e&&(w=e.zoomOffsetX),"zoomOffsetY"in e&&(m=e.zoomOffsetY);var y=this.getScrollLeft(),v=this.getScrollTop(),_=q(t)?t:[t,t],S=_[0],x=_[1],z=this.zoomRangeX||d,b=this.zoomRangeY||d,E=I(S,z[0],z[1]),C=I(x,b[0],b[1]),O=this.options;O.zoomX=E,O.zoomY=C,O.zoom=(E+C)/2;var M=this.getScrollLeft(),R=this.getScrollTop(),X=0,k=0;o==="fixed"?(X=F("".concat(w),this.viewportWidth),k=F("".concat(m),this.viewportHeight)):o==="viewport"?(X=(-y+F("".concat(w),this.viewportWidth))*h,k=(-v+F("".concat(m),this.viewportHeight))*f):(X=F("".concat(w),a),k=F("".concat(m),c));var ae=y+X/h,K=v+k/f,le=M+X/E,ce=R+k/C;this._scrollBy(ae-le,K-ce,{zoom:!!(E-h||C-f)}),this.render()},i._scrollBy=function(t,e,o){var n=this.getScrollLeft(),a=this.getScrollTop();return o!=null&&o.absolute&&(n*=this.zoomX,a*=this.zoomY),this._scrollTo(n+t,a+e,o)},i._scrollTo=function(t,e,o){var n=this,a=this,c=a.scrollLeft,h=a.scrollTop,f=o==null?void 0:o.absolute;this._scrollToType("horizontal",t,f),this._scrollToType("vertical",e,f);var d=this.scrollLeft,u=this.scrollTop;this.render();var g=this.getScrollLeft(),w=this.getScrollTop();return this._emitScrollEvent(g,w,o==null?void 0:o.zoom),Math.round(c)!==d||Math.round(h)!==u?(this.isLoop=!0,this.move(d,u),requestAnimationFrame(function(){if(n.isLoop){n.isLoop=!1;var p=n.wrapperElement,m=p.scrollLeft,y=p.scrollTop;n.scrollLeft=m,n.scrollTop=y,(d!==Math.round(m)||u!==Math.round(y))&&n._scrollTo(g,w)}}),!1):!0},i._scrollToType=function(t,e,o){var n=Ie[t],a=this,c=a.margin,h=c===void 0?A.margin:c,f=a.threshold,d=f===void 0?A.threshold:f,u=this["scroll".concat(n.pos)],g=this["getRange".concat(n.coord)](!0,!0),w=g[0],p=g[1],m=Math.round(u),y=this["getScrollArea".concat(n.size)](),v=this["zoom".concat(n.coord)];o&&(e=e/v);var _=e*v;if(w===p)m=w,e=w/v;else if(_-d<=w){var S=Math.max(0,_-w);m=S,e=(w+S)/v}else if(_+d>=p){var x=Math.max(0,p-_);m=y-x,e=(p-x)/v}else m<d?m+=h:m>y-d&&(m-=h);m=Math.round(m),this["scroll".concat(n.pos)]=m,this["offset".concat(n.coord)]=e-m/v},i._getRangeCoord=function(t,e,o){var n=this,a=n.margin,c=a===void 0?A.margin:a,h=n.threshold,f=Ie[t],d=Le(this["range".concat(f.coord)],A["range".concat(f.coord)]),u=Le(this["rangeOffset".concat(f.coord)],A["rangeOffset".concat(f.coord)]),g=this["zoom".concat(f.coord)],w=hn(this["getScroll".concat(f.pos)](),c,d,h,o);return e?[w[0]*g+u[0],this.options.useOverflowScroll?Math.max(this["viewport".concat(f.size)]*g-this["container".concat(f.size)],w[1]*g+u[1]):w[1]*g+u[1]]:[w[0]+u[0],w[1]+u[1]]},i._emitScrollEvent=function(t,e,o){var n=this._asLeft,a=this._asTop;!o&&n===t&&a===e||(this._asLeft=t,this._asTop=e,this.trigger("scroll",{scrollLeft:t,scrollTop:e,zoomX:this.zoomX,zoomY:this.zoomY}))},i._getScrollRangeX=function(){var t=this.getScrollLeft(),e=this.rangeX,o=e[0],n=e[1];this.useOverflowScroll&&isFinite(n)&&(n=Math.max(n,this.viewportWidth-this.containerWidth/this.zoomX));var a=Math.min(0,isFinite(o)?Math.min(o,t):t),c=Math.max(0,isFinite(n)?Math.max(n,t):t),h=this.viewportScrollWidth,f=Math.max(this.containerWidth/this.zoomX,h)-h,d=Math.min(0,f+a);return[d,c]},i._getScrollRangeY=function(){var t=this.getScrollTop(),e=this.rangeY,o=e[0],n=e[1];this.useOverflowScroll&&isFinite(n)&&(n=Math.max(n,this.viewportHeight-this.containerHeight/this.zoomY));var a=Math.min(0,isFinite(o)?Math.min(o,t):t),c=Math.max(0,isFinite(n)?Math.max(n,t):t),h=this.viewportScrollHeight,f=Math.max(this.containerHeight/this.zoomY,h)-h,d=Math.min(0,f+a);return[d,c]},r=tn([Lt(De,function(t,e){var o={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},n=Qe("set ".concat(e));t[n]?o.set=function(a){this[n](a)}:o.set=function(a){this.options[e]=a},Object.defineProperty(t,e,o)})],r),r}(ze),dn=function(s){je(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r}(fn);const L=window.React.createElement,vn=window.React.PureComponent;var xe=function(s,r){return xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])},xe(s,r)};function pn(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");xe(s,r);function i(){this.constructor=s}s.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var se=function(){return se=Object.assign||function(r){for(var i,t=1,e=arguments.length;t<e;t++){i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},se.apply(this,arguments)};function mn(s,r,i,t){var e=arguments.length,o=e<3?r:t,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,r,i,t);else for(var a=s.length-1;a>=0;a--)(n=s[a])&&(o=(e<3?n(o):e>3?n(r,i,o):n(r,i))||o);return e>3&&o&&Object.defineProperty(r,i,o),o}var Ve=pt.map(function(s){return Qe("on ".concat(s))}),gn=function(s){pn(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}var i=r.prototype;return i.render=function(){var t=this.props.className;return L("div",{className:"".concat(t||""," ").concat(vt),ref:U(this,"containerElement")},L("div",{className:"infinite-viewer-wrapper",ref:U(this,"wrapperElement")},L("div",{className:"infinite-viewer-scroll-area",ref:U(this,"scrollAreaElement")}),this.props.children),L("div",{className:"infinite-viewer-scroll-bar infinite-viewer-horizontal-scroll-bar",ref:U(this,"horizontalScrollElement")},L("div",{className:"infinite-viewer-scroll-thumb"})),L("div",{className:"infinite-viewer-scroll-bar infinite-viewer-vertical-scroll-bar",ref:U(this,"verticalScrollElement")},L("div",{className:"infinite-viewer-scroll-thumb"})))},i.componentDidMount=function(){var t=this,e=this.props,o={};sn.forEach(function(n){n in e&&typeof e[n]<"u"&&(o[n]=e[n])}),this.infiniteViewer=new dn(this.containerElement,this.scrollAreaElement.nextElementSibling,se(se({},o),{wrapperElement:this.wrapperElement,scrollAreaElement:this.scrollAreaElement,horizontalScrollElement:this.horizontalScrollElement,verticalScrollElement:this.verticalScrollElement})),pt.forEach(function(n,a){t.infiniteViewer.on(n,function(c){var h=t.props,f=h[Ve[a]]&&h[Ve[a]](c);f===!1&&c.stop()})})},i.componentDidUpdate=function(t){var e=this.props,o=this.infiniteViewer;De.forEach(function(n){n in e&&o[n]!==e[n]&&(o[n]=e[n])})},i.componentWillUnmount=function(){this.infiniteViewer.destroy()},i.getElement=function(){return this.containerElement},mn([Wt(an)],r.prototype,"infiniteViewer",void 0),r}(vn);const wn=window.React.forwardRef,_n=window.React.useImperativeHandle,He=window.React.useState,de=window.antd.Form,Sn=window.antd.Input,yn=window.antd.Modal;function xn(s,r){const[i,t]=He(!1),[e,o]=He(),[n]=de.useForm();_n(r,()=>({open(h,f){t(!0),o({callback:f}),n.setFieldsValue({title:h})}}));const a=()=>{t(!1)},c=()=>{n.validateFields().then(h=>{e==null||e.callback(h.title),t(!1)}).catch(h=>{console.log(h)})};return l.jsx(l.Fragment,{children:l.jsx(yn,{title:"节点修改",open:i,onCancel:a,onOk:c,children:l.jsx(de,{form:n,style:{width:"80%",margin:"20px auto 0"},children:l.jsx(de.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入节点名称"}],children:l.jsx(Sn,{placeholder:"请输入节点名称"})})})})})}const En=wn(xn),bn="_actionBox_pz1pv_3",zn="_menuAction_pz1pv_9",Cn="_category_pz1pv_22",Tn="_navTitle_pz1pv_28",jn="_subItem_pz1pv_31",Dn="_checked_pz1pv_41",Yn="_content_pz1pv_44",Xn="_desc_pz1pv_48",Rn="_descTitle_pz1pv_48",An="_descInfo_pz1pv_51",Y={actionBox:bn,menuAction:zn,category:Cn,navTitle:Tn,subItem:jn,checked:Dn,content:Yn,desc:Xn,descTitle:Rn,descInfo:An},re=window.antd.Form,On=window.antd.Input,Mn=window.antd.Space,Nn=window.antd.Button,kn=window.icons.PlusOutlined,Pn=window.icons.MinusOutlined,Fn=()=>l.jsx(re.Item,{label:"发送数据",children:l.jsx(re.List,{name:["data"],children:(s,{add:r,remove:i})=>l.jsxs(l.Fragment,{children:[s.map(({name:t})=>l.jsxs(Mn,{align:"baseline",style:{marginBottom:20,alignItems:"center"},children:[l.jsx(re.Item,{name:[t,"key"],noStyle:!0,labelCol:{span:0},wrapperCol:{span:24},children:l.jsx(On,{placeholder:"参数名"})}),l.jsx(re.Item,{name:[t,"value"],noStyle:!0,children:l.jsx(wt,{placeholder:"参数值"})}),l.jsx(kn,{onClick:()=>r({key:""},t+1)}),l.jsx(Pn,{onClick:()=>i(t)})]},"data"+t)),l.jsx(Nn,{block:!0,style:{marginBottom:10},onClick:()=>r({key:""}),children:"增加参数"})]})})}),In=window.React.useEffect,ie=window.antd.Form,Ln=window.antd.Divider,Wn=window.antd.Input,Bn=window.antd.Switch,oe=window.antd.Radio,Vn=({form:s})=>(In(()=>{s.setFieldsValue({jumpType:"route"})},[]),l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:Y.desc,children:[l.jsx("h3",{className:Y.descTitle,children:"说明"}),l.jsx("p",{className:Y.descInfo,children:"跳转到指定页面。1. 系统内跳转会通过自身路由实现；2. 跨服务跳转主要是基于microApp的父子应用通信方式，主应用需要监听数据，并添加跳转代码；3. 超链接跳转通过window.open或location方式实现；"}),l.jsx(Ln,{})]}),l.jsx(ie.Item,{label:"跳转方式",name:"jumpType",children:l.jsxs(oe.Group,{buttonStyle:"solid",children:[l.jsx(oe.Button,{value:"route",children:"系统内跳转"}),l.jsx(oe.Button,{value:"micro",children:"跨服务跳转"}),l.jsx(oe.Button,{value:"link",children:"超链接跳转"})]})}),l.jsx(ie.Item,{label:"页面地址",name:"url",rules:[{required:!0,message:"请输入跳转地址"}],children:l.jsx(Wn.TextArea,{placeholder:"请输入页面地址",rows:4})}),l.jsx(ie.Item,{noStyle:!0,shouldUpdate:!0,children:()=>s.getFieldValue("jumpType")==="link"?l.jsx(ie.Item,{label:"新窗口",name:"isNewWindow",children:l.jsx(Bn,{})}):null})]})),Hn=window.antd.Divider,$n=()=>l.jsx(l.Fragment,{children:l.jsxs("div",{className:Y.desc,children:[l.jsx("h3",{className:Y.descTitle,children:"说明"}),l.jsx("p",{className:Y.descInfo,children:"刷新当前页面。"}),l.jsx(Hn,{})]})}),Zn=window.antd.Divider,qn=window.antd.Form,Un=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:Y.desc,children:[l.jsx("h3",{className:Y.descTitle,children:"说明"}),l.jsx("p",{className:Y.descInfo,children:"执行JS脚本，比如修改参数，获取变量、表单值、Store数据，以及对数据进行二次加工。"}),l.jsx(Zn,{})]}),l.jsx(qn.Item,{name:"scripts",rules:[{required:!0,message:"请输入要执行的脚本"}],wrapperCol:{span:24},children:l.jsx(_t,{height:"260px",language:"javascript"})})]}),Gn=window.antd.Divider,Jn=window.antd.Form,Kn=window.antd.Input,Qn=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:Y.desc,children:[l.jsx("h3",{className:Y.descTitle,children:"说明"}),l.jsxs("p",{className:Y.descInfo,children:["复制文本内容至粘贴板，支持模板字符串。例如：https://xxx-v.marsview.cc/id?a=","${name}"]}),l.jsx(Gn,{})]}),l.jsx(Jn.Item,{label:"复制内容",name:"content",tooltip:"如果内容包含模板语法，请确保事件流的上一步操作返回了改字段。",children:l.jsx(Kn.TextArea,{placeholder:"输入复制内容，支持模板字符串语法。",rows:5})})]}),er=window.antd.Modal,$e=window.antd.Form,tr=window.React.forwardRef,nr=window.React.useImperativeHandle,ve=window.React.useState,rr=(s,r)=>{var w;const[i,t]=ve(!1),[e,o]=ve({}),[n,a]=ve({}),[c]=$e.useForm(),h={labelCol:{span:6},wrapperCol:{span:16}},f=[{label:"页面",key:"page-nav",children:[{label:"跳转链接",key:"jumpLink",render:()=>l.jsx(Vn,{form:c})},{label:"刷新页面",key:"reloadPage",render:()=>l.jsx($n,{})}]},{label:"其他",key:"other-nav",children:[{label:"复制内容",key:"copy",render:()=>l.jsx(Qn,{})},{label:"脚本运行",key:"script",render:()=>l.jsx(Un,{})}]}],d=async()=>{try{await c.validateFields();const p=c.getFieldsValue();if(p.assignmentType==="assignment"&&p.assignmentWay==="static"&&(p.variableType==="array"||p.variableType==="object"))try{p.value=typeof p.value=="string"?JSON.parse(p.value||""):p.value||""}catch(m){console.error(m);return}n.callback({actionType:e.key,actionName:e.label,...p}),t(!1)}catch(p){console.log(p)}},u=()=>{t(!1)},g=p=>{c.resetFields(),p.key==="variable"?c.setFieldsValue({assignmentType:"assignment",assignmentWay:"static"}):p.key==="showConfirm"?c.setFieldsValue({type:"confirm",title:"确认",content:"确定要执行此操作吗？",okText:"确认",cancelText:"取消"}):p.key==="message"?c.setFieldsValue({type:"success",content:"操作成功",duration:3}):p.key==="notification"?c.setFieldsValue({type:"info",message:"通知",description:"操作成功",placement:"topRight",duration:4.5}):p.key==="setTimeout"?c.setFieldsValue({duration:3}):p.key==="visible"?c.setFieldsValue({showType:"static",showResult:"show",expression:""}):p.key==="disable"?c.setFieldsValue({disableType:"static",disableResult:!0,expression:""}):p.key==="sendMessage"?c.setFieldsValue({msgType:"text",content:"你好，我是飞书机器人"}):p.key==="script"&&c.setFieldsValue({scripts:`/**
* 触发动作后，会执行该函数
* 上下文: context
* 变量: variable
* 事件流参数: eventParams
*/
function run(){
    return context.eventParams;
}
`}),o({key:p.key,label:p.label,render:p.render})};return nr(r,()=>({open(p,m){var y;if(a({callback:m}),c.resetFields(),p!=null&&p.actionType)for(let v=0;v<f.length;v++){const _=(y=f[v].children.filter(S=>S.key===p.actionType))==null?void 0:y[0];if(_){o({key:_.key,label:_.label,render:_.render}),c.setFieldsValue(p);break}}else o({}),c.resetFields();t(!0)}})),l.jsx(er,{title:"事件行为配置",width:800,open:i,okText:"确认",cancelText:"取消",onOk:d,onCancel:u,children:l.jsxs("div",{className:Y.actionBox,children:[l.jsx("div",{className:Y.menuAction,children:l.jsx("ul",{children:f.map(p=>l.jsxs("li",{className:Y.category,children:[l.jsx("span",{className:Y.navTitle,children:p.label}),l.jsx("ul",{children:p.children.map(m=>l.jsx("li",{className:`${Y.subItem} ${e.key===m.key?Y.checked:""}`,onClick:()=>g(m),children:l.jsx("span",{children:m.label})},m.key))})]},p.key))})}),l.jsx("div",{className:Y.content,children:l.jsx($e,{form:c,...h,children:e!=null&&e.key?l.jsxs(l.Fragment,{children:[(w=e.render)==null?void 0:w.call(e),l.jsx(Fn,{})]}):l.jsx("div",{style:{textAlign:"center",lineHeight:"300px"},children:"请选择要执行的动作"})})})]})})},ir=tr(rr),or=window.React.forwardRef,sr=window.React.useImperativeHandle,Ze=window.React.useRef,ar=window.React.useState,lr=window.icons.DeleteOutlined,cr=window.icons.PlusOutlined;function V(s,r,i=null){for(let t=0;t<s.length;t++){if(s[t].id===r)return{index:t,parentNode:i,selfNode:s[t]};if(s[t].children){const e=V(s[t].children,r,s[t]);if(e)return e}}return null}function ur(s,r){const i=Ze(),t=Ze(),[e,o]=ar([]);sr(r,()=>({setNodeList(v){v.length===0?o([{id:"start",type:"start",title:"开始"},{id:"end",type:"end",title:"结束"}]):o(()=>[...v])},getNodeList:()=>e}));const n=({id:v})=>l.jsx("span",{className:"add-node-btn",children:l.jsxs("span",{className:"add-icon",children:[l.jsx(cr,{style:{fontSize:16,color:"#fff"}}),l.jsxs("div",{className:"popover",children:[l.jsx("a",{onClick:()=>c("normal",v),children:"普通节点"}),l.jsx("a",{onClick:()=>c("condition",v),children:"分支节点"})]})]})}),a=(v=8)=>v===4?Math.random().toString().slice(2,6):Math.random().toString().slice(2,10),c=(v,_)=>{var x;v==="normal"?(x=i.current)==null||x.open("节点"+a(4),z=>{S(z)}):S("");function S(z){var O,M;const b=JSON.parse(JSON.stringify(e)),E=V(b,_),C={id:a(),type:v,title:z,content:"行为配置",config:{},children:[]};if(E.parentNode)if(((O=E==null?void 0:E.parentNode)==null?void 0:O.type)==="condition"){if(v==="condition"){Q.error("分支节点后第一个不能添加分支节点");return}E.parentNode.children[E.index].children.unshift(C)}else["normal","success","fail"].includes((M=E==null?void 0:E.parentNode)==null?void 0:M.type)&&(v==="normal"?E.parentNode.children.splice(E.index+1,0,C):E.parentNode.children.splice(E.index+1,0,{...C,children:[{...C,id:a(),type:"success",title:"成功",content:"成功时执行此流程",children:[]},{...C,id:a(),type:"fail",title:"失败",content:"失败时执行此流程",children:[]}]}));else if(v==="normal")b.splice(E.index+1,0,C);else{if(E.selfNode.type==="start"){Q.error("开始节点后第一个不能添加分支节点");return}if(E.selfNode.type==="condition"){Q.error("分支节点后第一个不能添加分支节点");return}b.splice(E.index+1,0,{...C,children:[{id:a(),type:"success",children:[],title:"成功",content:"成功时执行此流程"},{id:a(),type:"fail",title:"失败",content:"失败时执行此流程",children:[]}]})}o(()=>[...b])}},h=(v,_)=>{var z,b,E;v.stopPropagation();const S=JSON.parse(JSON.stringify(e)),x=V(S,_);if(!x.parentNode)S.splice(x.index,1);else if(["success","fail","normal"].includes((z=x==null?void 0:x.parentNode)==null?void 0:z.type))x.parentNode.children.splice(x.index,1);else if(((b=x==null?void 0:x.parentNode)==null?void 0:b.type)==="condition"){const C=V(S,(E=x==null?void 0:x.parentNode)==null?void 0:E.id);C.parentNode?C.parentNode.children.splice(C.index,1):S.splice(C.index,1)}o(()=>[...S])},f=(v,_)=>{var S;v.stopPropagation(),!(_.title==="成功"||_.title==="失败")&&((S=i.current)==null||S.open(_.title,x=>{const z=JSON.parse(JSON.stringify(e)),b=V(z,_.id);b.selfNode.title=x,o(()=>[...z])}))},d=v=>{var _;if(v.title==="成功"||v.title==="失败"){Q.info("请在此节点后新增执行节点");return}(_=t.current)==null||_.open(v.config,S=>{const x=JSON.parse(JSON.stringify(e)),z=V(x,v.id);z.selfNode.content=S.actionName,z.selfNode.config=S,o(()=>[...x])})};function u(v){return v.map(_=>{switch(_.type){case"start":return l.jsx(g,{},_.id);case"end":return l.jsx(w,{},_.id);case"normal":case"success":case"fail":return l.jsx(p,{node:_},_.id);case"condition":return l.jsx(m,{title:_.title,id:_.id,children:_.children.map((S,x)=>l.jsxs(y,{type:x===0?"start":x==_.children.length-1?"end":"center",children:[u([S]),u(S.children)]},S.id))},_.id)}})}const g=()=>l.jsxs("div",{className:"start-node",children:[l.jsx("div",{className:"circle-btn",children:"开始"}),l.jsx("span",{className:"arrow-line"}),l.jsx(n,{id:"start"})]}),w=()=>l.jsx("div",{className:"end-node",children:l.jsx("div",{className:"circle-btn gray",children:"结束"})}),p=({node:v})=>l.jsxs("div",{className:"normal-node",children:[l.jsxs("div",{className:`node-info ${v.type}`,onClick:()=>d(v),children:[l.jsx("div",{className:"title",onClick:_=>f(_,v),children:v.title}),l.jsx("div",{className:"content",children:v.content}),l.jsx(lr,{className:"icon-del",onClick:_=>h(_,v.id)})]}),l.jsx("span",{className:"arrow-line"}),l.jsx(n,{id:v.id})]}),m=({children:v,id:_})=>l.jsxs("div",{className:"condition-node",children:[l.jsx("div",{className:"title",children:"分支"}),l.jsx("div",{className:"node-list",children:v}),l.jsx("span",{className:"arrow-line"}),l.jsx(n,{id:_})]}),y=({type:v,children:_})=>l.jsxs("div",{className:"node-item",children:[l.jsx("span",{className:"left-line "+v}),l.jsx("span",{className:"right-line "+v}),l.jsx("span",{className:"connect-line"}),l.jsx("div",{className:"normal-container",children:_})]});return l.jsxs(l.Fragment,{children:[l.jsx(gn,{className:"node-viewer dot",displayHorizontalScroll:!1,useMouseDrag:!0,useWheelScroll:!0,useAutoZoom:!0,zoomRange:[.5,10],zoom:1.5,useResizeObserver:!0,children:l.jsx("div",{className:"node-container",children:u(e)})}),l.jsx(En,{ref:i}),l.jsx(ir,{ref:t})]})}const hr=or(ur),fr=window.antd.Alert,qe=window.antd.Button,dr=window.antd.Drawer,vr=window.antd.Space,pr=window.React.forwardRef,mr=window.React.useImperativeHandle,gr=window.React.useRef,Ue=window.React.useState;function wr(s,r){const[i,t]=Ue(!1),[e,o]=Ue(),n=gr(null);mr(r,()=>({open(h,f){o({callback:f}),t(!0),setTimeout(()=>{var d;(d=n.current)==null||d.setNodeList(h)})}}));const a=()=>{var f;const h=(f=n.current)==null?void 0:f.getNodeList();e==null||e.callback(h),t(!1)},c=()=>{t(!1)};return l.jsxs(dr,{title:"事件流配置",width:"100vw",height:"100vh",placement:"top",push:!1,open:i,closeIcon:null,onClose:c,extra:l.jsx(l.Fragment,{children:l.jsxs(vr,{children:[l.jsx(qe,{type:"primary",onClick:a,children:"保存"}),l.jsx(qe,{onClick:c,children:"关闭"})]})}),children:[l.jsx(fr,{message:"使用说明",description:l.jsxs("div",{children:[l.jsx("p",{children:"1. 事件流从左到右按顺序执行。"}),l.jsx("p",{children:"2. 参数会在事件流中流转，比如点击表格的编辑按钮，事件流默认可以取到表格对应的行数据对象，传递到下一个节点。"}),l.jsx("p",{children:"3. 可以通过脚本运行来干预数据输出和下一个节点的流转。"}),l.jsx("p",{children:"4. 获取表单数据时，可以直接点开行为配置，点击获取表单值，选择对应表单即可。"})]}),type:"info",showIcon:!0,style:{position:"absolute",top:100,zIndex:99}}),l.jsx(hr,{ref:n})]})}const _r=pr(wr),Sr="_event_1d6b6_1",yr="_title_1d6b6_6",xr="_ml5_1d6b6_22",Er="_addAction_1d6b6_26",br="_eventFlow_1d6b6_31",B={event:Sr,title:yr,ml5:xr,addAction:Er,eventFlow:br},zr=window.React.memo,Cr=window.React.useRef,Tr=window.React.useEffect,pe=window.antd.Form,jr=window.antd.Dropdown,Dr=window.antd.Button,Yr=window.icons.PlusOutlined,Xr=window.icons.DeleteOutlined,kr=zr(()=>{var a,c,h;const s=Cr(),r=gt(),[i]=pe.useForm();Tr(()=>{var d;i.resetFields();let f=[];r.selectedElement?f=(((d=r.page.elementsMap[r.selectedElement.id])==null?void 0:d.config)||{}).events||[]:f=r.page.config.events||[],i.setFieldsValue({events:f})},[r.selectedElement]);const t=(a=r.selectedElement)!=null&&a.id?(h=(c=r.page.elementsMap[r.selectedElement.id])==null?void 0:c.events)==null?void 0:h.map(f=>({key:f.value,label:f.name})):r.page.events.map(f=>({key:f.value,label:f.name})),e=(f,d)=>{var u;(u=r.selectedElement)!=null&&u.id?r.editElement({id:r.selectedElement.id,type:"events",events:d.events||[]}):r.savePageInfo({type:"events",events:d.events||[]})},o=f=>{var d;(d=s.current)==null||d.open(i.getFieldValue(["events",f,"actions"]),u=>{i.setFieldValue(["events",f,"actions"],u),e(null,i.getFieldsValue())})},n={labelCol:{span:7},wrapperCol:{span:15}};return l.jsxs(l.Fragment,{children:[l.jsx(pe,{form:i,...n,onValuesChange:e,children:l.jsx("div",{style:{marginBottom:10},children:l.jsx(pe.List,{name:["events"],children:(f,{add:d,remove:u})=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:B.event,children:l.jsx(jr,{menu:{items:t,onClick:({key:g})=>{var p;const w=(p=t==null?void 0:t.find(m=>(m==null?void 0:m.key)===g))==null?void 0:p.label;d({nickName:w,eventName:g,actions:[]})}},placement:"bottom",children:l.jsxs("a",{onClick:g=>g.preventDefault(),children:[l.jsx(Yr,{}),l.jsx("span",{className:B.ml5,children:"添加事件"})]})})}),f.map(({key:g,name:w})=>l.jsxs("div",{className:B.eventFlow,children:[l.jsxs("h2",{className:B.title,children:[l.jsx("span",{children:i.getFieldValue(["events",w,"nickName"])}),l.jsx(Xr,{onClick:()=>u(w),className:B.ml5})]}),l.jsx("div",{className:B.addAction,children:l.jsx(Dr,{type:"primary",onClick:()=>o(w),children:"设置事件流"})})]},"event"+g))]})})})}),l.jsx(_r,{ref:s})]})});export{kr as default};
