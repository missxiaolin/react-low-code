import{E as S,t as M,y as N,F as G,p as D,G as U,H,j as d,u as T,I as z}from"./index-Pse19Vbq.js";import{g as B}from"./index-DYwsX7lf.js";import{b as K,c as v,t as k,e as V,l as W,f as h,r as Y}from"./util-DDYI9dx_.js";import{setComponentRef as $}from"./useComponentRefs-BjsmN1lJ.js";/* empty css              */import{s as q,o as J,a as Q}from"./isPlainObject-C386A5IQ.js";var x=S?S.isConcatSpreadable:void 0;function X(e){return M(e)||N(e)||!!(x&&e&&e[x])}function Z(e,n,s,r,o){var i=-1,f=e.length;for(s||(s=X),o||(o=[]);++i<f;){var w=e[i];s(w)?G(o,w):o[o.length]=w}return o}function ee(e){var n=e==null?0:e.length;return n?Z(e):[]}function ne(e){return q(J(e,void 0,ee),e+"")}function te(e,n,s){var r=-1,o=e.length;n<0&&(n=-n>o?0:o+n),s=s>o?o:s,s<0&&(s+=o),o=n>s?0:s-n>>>0,n>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+n];return i}function se(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}function oe(e,n){return n.length<2?e:K(e,te(n,0,-1))}function re(e,n){return n=v(n,e),e=oe(e,n),e==null||delete e[k(se(n))]}function ae(e){return Q(e)?void 0:e}var ie=1,le=2,pe=4,fe=ne(function(e,n){var s={};if(e==null)return s;var r=!1;n=V(n,function(i){return i=v(i,e),r||(r=i.length>1),i}),D(e,U(e),s),r&&(s=H(s,ie|le|pe,ae));for(var o=n.length;o--;)re(s,n[o]);return s});const P=window.React.memo,E=window.React.useEffect,F=window.React.useState,de=window.React.forwardRef,ue=window.React.Suspense,I=window.antd,me=window.dayjs,ce=window.Plots,_=P(({item:e})=>{const[n,s]=F(null),[r,o]=F(),i=T(t=>t.page),{elementsMap:f,variables:w,variableData:C,formData:L}=i;function O(){window.React=window.React||React,window.dayjs=window.dayjs||me,window.antd=window.antd||I,window.Plots=window.Plots||ce}E(()=>{f[e.id].remoteUrl?(O(),W(e.type,f[e.id].remoteCssUrl),import(f[e.id].remoteUrl||"").then(t=>{s(()=>de(t.default))})):s(B(e.type)),o(f[e.id].config)},[]);const b=t=>{var l,a,p,u,R;if((l=t.props)!=null&&l.formItem){const g=((a=t.props)==null?void 0:a.formItem.rules)||[];g.map(y=>{y.pattern&&(y.pattern=new RegExp(y.pattern))}),t.props.formItem.rules=g,(p=e.parentId)!=null&&p.startsWith("FormList")&&t.props.formItem.name&&(t.props.formItem.name=[e.name,t.props.formItem.name]);const{labelCol:m,wrapperCol:c}=t.props.formItem;h(m==null?void 0:m.span)&&h(m==null?void 0:m.offset)&&((u=t.props.formItem)==null||delete u.labelCol),h(c==null?void 0:c.span)&&h(c==null?void 0:c.offset)&&((R=t.props.formItem)==null||delete R.wrapperCol)}},j=t=>{Object.keys(t.props||{}).map(l=>{const a=t.props[l];typeof a=="object"&&((a==null?void 0:a.type)==="static"?t.props[l]=a.value:(a==null?void 0:a.type)==="variable"&&(t.props[l]=Y(a.value)))})};E(()=>{o(()=>z(f[e.id].config,t=>{b(t),j(t)}))},[C,L,f]);const A=()=>{const t={},l=(r==null?void 0:r.events)||[];if(!(l!=null&&l.length))return{};const a={};l.forEach(p=>{var u;((u=p.actions)==null?void 0:u.length)>0&&(a[p.eventName]=(a[p.eventName]||[]).concat([p.actions]))});for(const p in a)t[p]=u=>{a[p].forEach(R=>{})};return t};return n&&(r==null?void 0:r.props.showOrHide)!==!1?d.jsx(ue,{fallback:d.jsx(I.Spin,{size:"default"}),children:d.jsx(n,{id:e.id,type:e.type,config:{...r,props:{...fe(r==null?void 0:r.props,["showOrHide"])}},elements:e.elements||[],...A(),ref:t=>$(e.id,t)})}):null}),we=P(({elements:e=[]})=>d.jsx(d.Fragment,{children:e.map(n=>n?d.jsx(_,{item:n},n.id):d.jsx(d.Fragment,{}))})),Ee=Object.freeze(Object.defineProperty({__proto__:null,Material:_,default:we},Symbol.toStringTag,{value:"Module"}));export{we as M,Ee as R,fe as o};
